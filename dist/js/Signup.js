import{V as Z,W as ee,n as D,o as j,X as ae,Y as I,Z as se,$ as re,K as t,s as i,j as e}from"./index.js";import{N as ne}from"./NavigationLogin.js";import{u as te}from"./useDispatch.js";var V={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ie=V.VITE_BACKEND_URL?V.VITE_BACKEND_URL+"/signup":"/wp-json/seven-tech/v1/users/v1/signup",oe={signupLoading:!1,signupError:"",signupSuccessMessage:"",signupErrorMessage:""},S=Z("signup/signup",function(){var m=D(j().mark(function o(a){var n,c,d,h,f,g;return j().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,isValidEmail(a.email)!=!1){s.next=3;break}throw new Error("A valid Email is required to signup.");case 3:if(re(a.username)!=!1){s.next=5;break}throw new Error("A valid Username is required to signup.");case 5:if(se(a.password)!=!1){s.next=7;break}throw new Error("A valid password is required to signup.");case 7:if(a.password==a.confirmPassword){s.next=9;break}throw new Error("Please enter your prefered password twice.");case 9:if(I(a.firstname)!=!1){s.next=11;break}throw new Error("Please provide a valid first name.");case 11:if(I(a.lastname)!=!1){s.next=13;break}throw new Error("Please provide a valid last name.");case 13:if(ae(a.phone)!=!1){s.next=15;break}throw new Error("Please provide a valid phone number.");case 15:return s.next=17,fetch(ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,username:a.username,password:a.password,confirmPassword:a.confirmPassword,firstname:a.firstname,lastname:a.lastname,phone:a.phone,location:a.location})});case 17:if(n=s.sent,n.ok){s.next=24;break}return s.next=21,n.json();case 21:throw c=s.sent,d=c.message,new Error(d);case 24:return s.next=26,n.json();case 26:return h=s.sent,s.abrupt("return",h);case 30:return s.prev=30,s.t0=s.catch(0),f=s.t0.code,g=s.t0.message,s.abrupt("return","Error (".concat(f,"): ").concat(g));case 35:case"end":return s.stop()}},o,null,[[0,30]])}));return function(o){return m.apply(this,arguments)}}());ee({name:"signup",initialState:oe,reducers:{},extraReducers:function(o){o.addCase(S.fulfilled,function(a,n){a.signupLoading=!1,a.signupError="",a.signupSuccessMessage=n.payload.successMessage,a.signupErrorMessage=n.payload.errorMessage}).addMatcher(isAnyOf(S.pending),function(a){a.signupLoading=!0,a.signupError=null,a.signupSuccessMessage=null,a.signupErrorMessage=null}).addMatcher(isAnyOf(S.rejected),function(a,n){a.signupLoading=!1,a.signupError=n.error.stack,a.signupErrorMessage=n.error.message})}});function me(){var m=t.useState(""),o=i(m,2),a=o[0],n=o[1],c=t.useState(""),d=i(c,2),h=d[0],f=d[1],g=t.useState(""),x=i(g,2),s=x[0],U=x[1],k=t.useState(""),y=i(k,2),p=y[0],R=y[1],L=t.useState(""),b=i(L,2),q=b[0],O=b[1],B=t.useState(""),P=i(B,2),G=P[0],K=P[1],F=t.useState(""),C=i(F,2),Y=C[0],z=C[1],J=t.useState("Enter the username, email, and password of your choice to sign up."),T=i(J,2),A=T[0],w=T[1],$=t.useState(""),N=i($,2),H=N[0],v=N[1],W=te();t.useEffect(function(){if(s!==""&&p!==""&&s===p){var E="You have successfully entered your password twice.";w(E),v("success")}else if(s!==""&&s!==p){var r="You have not entered your password twice.";w(r),v("error")}},[s,p]);var X={username:a,email:h,password:s,confirmPassword:p,firstname:q,lastname:G,phone:Y,location:"here"},Q=function(){var E=D(j().mark(function r(M){return j().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:M.preventDefault(),W(S(X)).then(function(l){console.log(l),w(l),v("success")}).then(function(){setTimeout(function(){window.location.href="/login"},5e3)}).catch(function(l){console.log(l.message),w(l.message),v(l.message)});case 2:case"end":return _.stop()}},r)}));return function(M){return E.apply(this,arguments)}}(),u=function(r){r.target.name==="user-name"?n(r.target.value):r.target.name==="email"?f(r.target.value):r.target.name==="password"?U(r.target.value):r.target.name==="confirm-password"?R(r.target.value):r.target.name==="firstname"?O(r.target.value):r.target.name==="lastname"?K(r.target.value):r.target.name==="phone"&&z(r.target.value)};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"signup",children:[e.jsx(ne,{}),e.jsx("div",{className:"login card",children:e.jsx("form",{children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"user-name",placeholder:"User Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"confirm-password",placeholder:"Confirm Password",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"phone",placeholder:"Phone",onChange:u,required:!0})})})]}),e.jsx("tfoot",{children:e.jsx("td",{children:e.jsx("button",{type:"submit",onClick:Q,children:e.jsx("h3",{children:"SIGN UP"})})})})]})})}),A!==""&&e.jsx("div",{className:"status-bar card ".concat(H),children:e.jsx("span",{children:A})})]})})}export{me as default};
//# sourceMappingURL=Signup.js.map
