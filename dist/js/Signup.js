import{c as Z,a as ee,b as U,d as j,i as ae,e as I,f as re,g as se,r as t,_ as i,j as e}from"./index.js";import{N as ne}from"./NavigationLogin.js";import{u as te}from"./useDispatch.js";var D={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ie=D.VITE_BACKEND_URL?D.VITE_BACKEND_URL+"/signup":"/wp-json/seven-tech/v1/users/v1/signup",oe={signupLoading:!1,signupError:"",signupSuccessMessage:"",signupErrorMessage:""},S=Z("signup/signup",function(){var m=U(j().mark(function o(a){var n,c,d,h,f,g;return j().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,isValidEmail(a.email)!=!1){r.next=3;break}throw new Error("A valid Email is required to signup.");case 3:if(se(a.username)!=!1){r.next=5;break}throw new Error("A valid Username is required to signup.");case 5:if(re(a.password)!=!1){r.next=7;break}throw new Error("A valid password is required to signup.");case 7:if(a.password==a.confirmPassword){r.next=9;break}throw new Error("Please enter your prefered password twice.");case 9:if(I(a.firstname)!=!1){r.next=11;break}throw new Error("Please provide a valid first name.");case 11:if(I(a.lastname)!=!1){r.next=13;break}throw new Error("Please provide a valid last name.");case 13:if(ae(a.phone)!=!1){r.next=15;break}throw new Error("Please provide a valid phone number.");case 15:return r.next=17,fetch(ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,username:a.username,password:a.password,confirmPassword:a.confirmPassword,firstname:a.firstname,lastname:a.lastname,phone:a.phone,location:a.location})});case 17:if(n=r.sent,n.ok){r.next=24;break}return r.next=21,n.json();case 21:throw c=r.sent,d=c.message,new Error(d);case 24:return r.next=26,n.json();case 26:return h=r.sent,r.abrupt("return",h);case 30:return r.prev=30,r.t0=r.catch(0),f=r.t0.code,g=r.t0.message,r.abrupt("return","Error (".concat(f,"): ").concat(g));case 35:case"end":return r.stop()}},o,null,[[0,30]])}));return function(o){return m.apply(this,arguments)}}());ee({name:"signup",initialState:oe,reducers:{},extraReducers:function(o){o.addCase(S.fulfilled,function(a,n){a.signupLoading=!1,a.signupError="",a.signupSuccessMessage=n.payload.successMessage,a.signupErrorMessage=n.payload.errorMessage}).addMatcher(isAnyOf(S.pending),function(a){a.signupLoading=!0,a.signupError=null,a.signupSuccessMessage=null,a.signupErrorMessage=null}).addMatcher(isAnyOf(S.rejected),function(a,n){a.signupLoading=!1,a.signupError=n.error.stack,a.signupErrorMessage=n.error.message})}});function me(){var m=t.useState(""),o=i(m,2),a=o[0],n=o[1],c=t.useState(""),d=i(c,2),h=d[0],f=d[1],g=t.useState(""),x=i(g,2),r=x[0],V=x[1],k=t.useState(""),y=i(k,2),p=y[0],R=y[1],L=t.useState(""),b=i(L,2),q=b[0],O=b[1],B=t.useState(""),P=i(B,2),G=P[0],F=P[1],K=t.useState(""),C=i(K,2),z=C[0],J=C[1],Y=t.useState("Enter the username, email, and password of your choice to sign up."),T=i(Y,2),A=T[0],w=T[1],H=t.useState(""),N=i(H,2),$=N[0],v=N[1],Q=te();t.useEffect(function(){if(r!==""&&p!==""&&r===p){var E="You have successfully entered your password twice.";w(E),v("success")}else if(r!==""&&r!==p){var s="You have not entered your password twice.";w(s),v("error")}},[r,p]);var W={username:a,email:h,password:r,confirmPassword:p,firstname:q,lastname:G,phone:z,location:"here"},X=function(){var E=U(j().mark(function s(M){return j().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:M.preventDefault(),Q(S(W)).then(function(l){console.log(l),w(l),v("success")}).then(function(){setTimeout(function(){window.location.href="/login"},5e3)}).catch(function(l){console.log(l.message),w(l.message),v(l.message)});case 2:case"end":return _.stop()}},s)}));return function(M){return E.apply(this,arguments)}}(),u=function(s){s.target.name==="user-name"?n(s.target.value):s.target.name==="email"?f(s.target.value):s.target.name==="password"?V(s.target.value):s.target.name==="confirm-password"?R(s.target.value):s.target.name==="firstname"?O(s.target.value):s.target.name==="lastname"?F(s.target.value):s.target.name==="phone"&&J(s.target.value)};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"signup",children:[e.jsx(ne,{}),e.jsx("div",{className:"login card",children:e.jsx("form",{children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"user-name",placeholder:"User Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"confirm-password",placeholder:"Confirm Password",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"phone",placeholder:"Phone",onChange:u,required:!0})})})]}),e.jsx("tfoot",{children:e.jsx("td",{children:e.jsx("button",{type:"submit",onClick:X,children:e.jsx("h3",{children:"SIGN UP"})})})})]})})}),A!==""&&e.jsx("div",{className:"status-bar card ".concat($),children:e.jsx("span",{children:A})})]})})}export{me as default};
//# sourceMappingURL=Signup.js.map
