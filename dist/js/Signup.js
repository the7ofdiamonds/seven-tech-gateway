import{m as W,n as X,c as M,d as _,r as i,_ as o,j as e}from"./index.js";import{N as Z}from"./NavigationLogin.js";import{u as ee}from"./useDispatch.js";var b={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ae=b.VITE_BACKEND_URL?b.VITE_BACKEND_URL+"/signup":"/wp-json/thfw/users/v1/signup",se={signupLoading:!1,signupError:"",signupMessage:"",signupMessageType:""},re=W("signup/signup",function(){var l=M(_().mark(function n(a){var t,h,c,g,f;return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,fetch(ae,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.username,email:a.email,password:a.password,confirmPassword:a.confirmPassword,firstname:a.firstname,lastname:a.lastname,phone:a.phone,location:a.location})});case 3:if(response.ok){s.next=9;break}return s.next=6,response.json();case 6:throw t=s.sent,h=t.message,new Error(h);case 9:return s.next=11,response.json();case 11:return c=s.sent,s.abrupt("return",c);case 15:return s.prev=15,s.t0=s.catch(0),g=s.t0.code,f=s.t0.message,s.abrupt("return","Error (".concat(g,"): ").concat(f));case 20:case"end":return s.stop()}},n,null,[[0,15]])}));return function(n){return l.apply(this,arguments)}}());X({name:"signup",initialState:se,reducers:{updateAccessToken:function(n,a){n.accessToken=a.payload},updateRefreshToken:function(n,a){n.refreshToken=a.payload}},extraReducers:function(n){n.addCase(signIn.fulfilled,function(a,t){a.signupLoading=!1,a.signupError="",a.signupMessage=t.payload.message,a.signupMessageType=t.payload.message_type,a.customToken=t.payload.custom_token}).addMatcher(isAnyOf(signIn.pending),function(a){a.signupLoading=!0,a.signupError=null}).addMatcher(isAnyOf(signIn.rejected),function(a,t){a.signupLoading=!1,a.signupError=t.error.stack,a.signupMessageType="error",a.signupMessage=t.error.message})}});function ue(){var l=i.useState(""),n=o(l,2),a=n[0],t=n[1],h=i.useState(""),c=o(h,2),g=c[0],f=c[1],w=i.useState(""),s=o(w,2),p=s[0],R=s[1],k=i.useState(""),x=o(k,2),m=x[0],D=x[1],U=i.useState(""),y=o(U,2),L=y[0],V=y[1],O=i.useState(""),T=o(O,2),q=T[0],B=T[1],G=i.useState(""),C=o(G,2),F=C[0],K=C[1],z=i.useState("Enter the username, email, and password of your choice to sign up."),I=o(z,2),A=I[0],S=I[1],J=i.useState(""),N=o(J,2),Y=N[0],j=N[1],H=ee();i.useEffect(function(){if(p!==""&&m!==""&&p===m){var v="You have successfully entered your password twice.";S(v),j("success")}else if(p!==""&&p!==m){var r="You have not entered your password twice.";S(r),j("error")}},[p,m]);var $={username:a,email:g,password:p,confirmPassword:m,firstname:L,lastname:q,phone:F,location:"here"},Q=function(){var v=M(_().mark(function r(P){return _().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:P.preventDefault(),H(re($)).then(function(d){console.log(d),S(d),j("success")}).then(function(){setTimeout(function(){window.location.href="/login"},5e3)}).catch(function(d){console.log(d.message),S(d.message),j(d.message)});case 2:case"end":return E.stop()}},r)}));return function(P){return v.apply(this,arguments)}}(),u=function(r){r.target.name==="user-name"?t(r.target.value):r.target.name==="email"?f(r.target.value):r.target.name==="password"?R(r.target.value):r.target.name==="confirm-password"?D(r.target.value):r.target.name==="firstname"?V(r.target.value):r.target.name==="lastname"?B(r.target.value):r.target.name==="phone"&&K(r.target.value)};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"signup",children:[e.jsx(Z,{}),e.jsx("div",{className:"login card",children:e.jsx("form",{children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"user-name",placeholder:"User Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"confirm-password",placeholder:"Confirm Password",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"phone",placeholder:"Phone",onChange:u,required:!0})})})]}),e.jsx("tfoot",{children:e.jsx("td",{children:e.jsx("button",{type:"submit",onClick:Q,children:e.jsx("h3",{children:"SIGN UP"})})})})]})})}),A!==""&&e.jsx("div",{className:"status-bar card ".concat(Y),children:e.jsx("span",{children:A})})]})})}export{ue as default};
//# sourceMappingURL=Signup.js.map
