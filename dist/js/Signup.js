import{f as Z,h as ee,i as A,k as y,m as ae,n as U,o as se,p as re,r as t,e as i,j as e}from"./index.js";import{N as ne}from"./NavigationLoginComponent.js";import{u as te}from"./useDispatch.js";var ie="http://localhost:8080/signup",ue={signupLoading:!1,signupError:"",signupSuccessMessage:"",signupErrorMessage:""},x=Z("signup/signup",function(){var c=A(y().mark(function o(a){var n,h,g,p,f,w;return y().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,isValidEmail(a.email)!=!1){s.next=3;break}throw new Error("A valid Email is required to signup.");case 3:if(re(a.username)!=!1){s.next=5;break}case 5:if(se(a.password)!=!1){s.next=7;break}case 7:if(a.password==a.confirmPassword){s.next=9;break}throw new Error("Please enter your prefered password twice.");case 9:if(U(a.firstname)!=!1){s.next=11;break}throw new Error("Please provide a valid first name.");case 11:if(U(a.lastname)!=!1){s.next=13;break}throw new Error("Please provide a valid last name.");case 13:if(ae(a.phone)!=!1){s.next=15;break}case 15:return s.next=17,fetch(ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,username:a.username,password:a.password,confirmPassword:a.confirmPassword,firstname:a.firstname,lastname:a.lastname,phone:a.phone,location:a.location})});case 17:if(n=s.sent,n.ok){s.next=24;break}return s.next=21,n.json();case 21:throw h=s.sent,g=h.message,new Error(g);case 24:return s.next=26,n.json();case 26:return p=s.sent,s.abrupt("return",p);case 30:return s.prev=30,s.t0=s.catch(0),f=s.t0.code,w=s.t0.message,s.abrupt("return","Error (".concat(f,"): ").concat(w));case 35:case"end":return s.stop()}},o,null,[[0,30]])}));return function(o){return c.apply(this,arguments)}}());ee({name:"signup",initialState:ue,reducers:{},extraReducers:function(o){o.addCase(x.fulfilled,function(a,n){a.signupLoading=!1,a.signupError="",a.signupSuccessMessage=n.payload.successMessage,a.signupErrorMessage=n.payload.errorMessage}).addMatcher(isAnyOf(x.pending),function(a){a.signupLoading=!0,a.signupError=null,a.signupSuccessMessage=null,a.signupErrorMessage=null}).addMatcher(isAnyOf(x.rejected),function(a,n){a.signupLoading=!1,a.signupError=n.error.stack,a.signupErrorMessage=n.error.message})}});function me(){var c="signup",o=t.useState(""),a=i(o,2),n=a[0],h=a[1],g=t.useState(""),p=i(g,2),f=p[0],w=p[1],P=t.useState(""),s=i(P,2),l=s[0],V=s[1],D=t.useState(""),b=i(D,2),m=b[0],O=b[1],R=t.useState(""),C=i(R,2),_=C[0],F=C[1],G=t.useState(""),k=i(G,2),Y=k[0],$=k[1],I=t.useState(""),M=i(I,2),J=M[0],z=M[1],B=t.useState("Enter the username, email, and password of your choice to sign up."),N=i(B,2),q=N[0],v=N[1],H=t.useState(""),T=i(H,2),K=T[0],j=T[1],Q=te();t.useEffect(function(){if(l!==""&&m!==""&&l===m){var S="You have successfully entered your password twice.";v(S),j("success")}else if(l!==""&&l!==m){var r="You have not entered your password twice.";v(r),j("error")}},[l,m]);var W={username:n,email:f,password:l,confirmPassword:m,firstname:_,lastname:Y,phone:J,location:"here"},X=function(){var S=A(y().mark(function r(L){return y().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:L.preventDefault(),Q(x(W)).then(function(d){console.log(d),v(d),j("success")}).then(function(){setTimeout(function(){window.location.href="/login"},5e3)}).catch(function(d){console.log(d.message),v(d.message),j(d.message)});case 2:case"end":return E.stop()}},r)}));return function(L){return S.apply(this,arguments)}}(),u=function(r){r.target.name==="user-name"?h(r.target.value):r.target.name==="email"?w(r.target.value):r.target.name==="password"?V(r.target.value):r.target.name==="confirm-password"?O(r.target.value):r.target.name==="firstname"?F(r.target.value):r.target.name==="lastname"?$(r.target.value):r.target.name==="phone"&&z(r.target.value)};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"signup",children:[e.jsx(ne,{page:c}),e.jsx("div",{className:"login card",children:e.jsx("form",{children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"user-name",placeholder:"User Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"confirm-password",placeholder:"Confirm Password",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",onChange:u,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"phone",placeholder:"Phone",onChange:u,required:!0})})})]}),e.jsx("tfoot",{children:e.jsx("td",{children:e.jsx("button",{type:"submit",onClick:X,children:e.jsx("h3",{children:"SIGN UP"})})})})]})})}),q!==""&&e.jsx("div",{className:"status-bar card ".concat(K),children:e.jsx("span",{children:q})})]})})}export{me as default};
//# sourceMappingURL=Signup.js.map
