{"version":3,"file":"Forgot.js","sources":["../../src/utils/DisplayStatus.js","../../src/controllers/forgotSlice.js","../../src/views/Forgot.jsx"],"sourcesContent":["const displayStatus = (status) => {\n  if (status.mesaage === 'Error (auth/too-many-requests): Firebase: Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later. (auth/too-many-requests).') {\n    return 'Access to this account has been temporarily disabled due to too many failed login attempts. You can immediately restore it by resetting your password or you can try again later.';\n  }\n\n  if (status.mesaage == 'Error (auth/wrong-password): Firebase: The password is invalid or the user does not have a password. (auth/wrong-password).') {\n    return 'The password is invalid or the user does not have a password.'\n  }\n\n  if (status.mesaage == 'Error (auth/user-not-found): Firebase: There is no user record corresponding to this identifier. The user may have been deleted. (auth/user-not-found).') {\n    return 'There is no user record corresponding to this identifier. The user may have been deleted.';\n  }\n\n  return status.message;\n};\n\nconst displayStatusType = (status) => {\n  if (status.mesaage === 'Login successful' ||\n    status.mesaage === 'twins!!' ||\n    status.mesaage === 'You are now a user.') {\n    return 'success';\n  }\n\n  if (status.mesaage === 'Error (auth/user-not-found): Firebase: There is no user record corresponding to this identifier. The user may have been deleted. (auth/user-not-found).' ||\n    status.mesaage === 'Error (auth/wrong-password): Firebase: The password is invalid or the user does not have a password. (auth/wrong-password).') {\n    return 'caution'\n  }\n\n  if (status.mesaage === 'You have been logged out' ||\n    status.mesaage === 'Error (auth/too-many-requests): Firebase: Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later. (auth/too-many-requests).') {\n\n    return 'error';\n  }\n};\n\nexport { displayStatus, displayStatusType };","import {\n    sendPasswordResetEmail,\n    getAuth\n} from \"firebase/auth\";\n\nconst apiUrl = import.meta.env.VITE_BACKEND_URL ? import.meta.env.VITE_BACKEND_URL + \"/forgot-password\" : \"/wp-json/seven-tech/v1/users/logout\";\n\nexport const forgot = async (Email) => {\n    const auth = getAuth();\n\n    try {\n        // Needs enpoint in the backend\n        await sendPasswordResetEmail(auth, Email);\n        return 'An email has been sent with a link to reset your password.';\n    } catch (error) {\n        const errorCode = error.code;\n        const errorMessage = error.message;\n\n        return `Error (${errorCode}): ${errorMessage}`;\n    }\n};","import { useState } from 'react';\n\nimport NavigationComponent from './components/NavigationLogin';\n\nimport { displayStatus } from '../utils/DisplayStatus';\n\nimport { forgot } from '../controllers/forgotSlice';\n\nfunction ForgotComponent() {\n  const [Email, setEmail] = useState('');\n  const [messageType, setMessageType] = useState('');\n  const [message, setMessage] = useState(\n    'If you forgot your password, enter your username or email.'\n  );\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    forgot(Email).then(() => {\n      const urlParams = new URLSearchParams(window.location.search);\n      const redirectTo = urlParams.get('redirectTo');\n\n      setTimeout(() => {\n        if (redirectTo === null) {\n          window.location.href = '/login';\n        } else {\n          window.location.href = redirectTo;\n        }\n      }, 5000);\n\n      setMessage(displayStatus(`Check your inbox and spam for ${Email}`));\n      setMessageType('info');\n    });\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === 'email') {\n      setEmail(e.target.value);\n    }\n  };\n\n  return (\n    <>\n      <main className=\"forgot\">\n        <NavigationComponent />\n        <div className=\"login card\">\n          <form>\n            <table>\n              <thead></thead>\n              <tbody>\n                <tr>\n                  <td>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder=\"Email\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <td>\n                  <button type=\"submit\" onClick={handleSubmit}>\n                    <h3>RESET</h3>\n                  </button>\n                </td>\n              </tfoot>\n            </table>\n          </form>\n        </div>\n\n        {message !== '' && (\n          <div className={`status-bar card ${messageType}`}>\n            <span>{message}</span>\n          </div>\n        )}\n      </main>\n    </>\n  );\n}\n\nexport default ForgotComponent;\n"],"names":["displayStatus","status","mesaage","message","forgot","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","Email","auth","errorCode","errorMessage","wrap","_context","prev","next","getAuth","sendPasswordResetEmail","abrupt","t0","code","concat","stop","_x","apply","arguments","ForgotComponent","_useState","useState","_useState2","_slicedToArray","setEmail","_useState3","_useState4","messageType","setMessageType","_useState5","_useState6","setMessage","handleSubmit","e","preventDefault","then","urlParams","URLSearchParams","window","location","search","redirectTo","get","setTimeout","href","handleChange","target","name","value","jsx","Fragment","children","jsxs","className","NavigationComponent","type","placeholder","onChange","required","onClick"],"mappings":"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"}