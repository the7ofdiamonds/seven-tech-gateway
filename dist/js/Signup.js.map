{"version":3,"file":"Signup.js","sources":["../../src/views/Signup.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport NavigationLoginComponent from './components/NavigationLoginComponent';\nimport StatusBarComponent from './components/StatusBarComponent';\n\nimport { signup } from '../controllers/signupSlice';\nimport {\n  updateAccessToken,\n  updateRefreshToken,\n} from '../controllers/loginSlice';\n\nfunction SignUpComponent() {\n  let page = 'signup';\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [nicename, setNicename] = useState('');\n  const [nickname, setNickname] = useState('');\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [phone, setPhone] = useState('');\n\n  const [showStatusbar, setShowStatusBar] = useState('');\n  const [message, setMessage] = useState(\n    'Enter the username, email, and password of your choice to sign up.'\n  );\n  const [messageType, setMessageType] = useState('');\n\n  const dispatch = useDispatch();\n\n  const {\n    signupStatusCode,\n    signupSuccessMessage,\n    signupErrorMessage,\n    loginSuccessMessage,\n    loginStatusCode,\n    accessToken,\n    refreshToken,\n  } = useSelector((state) => state.signup);\n\n  useEffect(() => {\n    if (\n      password !== '' &&\n      confirmPassword !== '' &&\n      password === confirmPassword\n    ) {\n      const msg = 'You have successfully entered your password twice.';\n      setMessage(msg);\n      setMessageType('success');\n    } else if (password !== '' && password !== confirmPassword) {\n      const msg = 'You have not entered your password twice.';\n      setMessage(msg);\n      setMessageType('error');\n    }\n  }, [password, confirmPassword]);\n\n  useEffect(() => {\n    if (signupStatusCode == 201 && signupSuccessMessage) {\n      setMessageType('success');\n      setMessage(signupSuccessMessage);\n    }\n  }, [signupSuccessMessage]);\n\n  useEffect(() => {\n    if (\n      loginStatusCode == 201 &&\n      loginSuccessMessage &&\n      accessToken &&\n      refreshToken\n    ) {\n      setTimeout(() => {\n        setMessageType('success');\n        setMessage(loginSuccessMessage);\n      }, 3000);\n    }\n  }, [loginStatusCode, loginSuccessMessage, accessToken, refreshToken]);\n\n  useEffect(() => {\n    if (signupErrorMessage) {\n      setMessageType('error');\n      setMessage(signupErrorMessage);\n    }\n  }, [signupErrorMessage]);\n\n  useEffect(() => {\n    if (signupSuccessMessage != '' || loginSuccessMessage != '') {\n      setShowStatusBar('modal-overlay');\n    }\n  }, [signupSuccessMessage, loginSuccessMessage]);\n\n  useEffect(() => {\n    if (accessToken && refreshToken) {\n      dispatch(updateAccessToken(accessToken));\n      dispatch(updateRefreshToken(refreshToken));\n    }\n  }, [dispatch, accessToken, refreshToken]);\n\n  // useEffect(() => {\n  //   if (accessToken && refreshToken && loginStatusCode == 200) {\n  //     const urlParams = new URLSearchParams(window.location.search);\n  //     const redirectTo = urlParams.get('redirectTo');\n\n  //     setTimeout(() => {\n  //       if (redirectTo == null) {\n  //         window.location.href = '/dashboard';\n  //       } else {\n  //         window.location.href = redirectTo;\n  //       }\n  //     }, 7000);\n  //   }\n  // }, [dispatch, accessToken, refreshToken, loginStatusCode]);\n\n  const credentials = {\n    username: username,\n    email: email,\n    password: password,\n    confirmPassword: confirmPassword,\n    nicename: nicename,\n    nickname: nickname,\n    firstname: firstname,\n    lastname: lastname,\n    phone: phone,\n    location: 'here',\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    dispatch(signup(credentials));\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === 'username') {\n      setUsername(e.target.value);\n    } else if (e.target.name === 'email') {\n      setEmail(e.target.value);\n    } else if (e.target.name === 'password') {\n      setPassword(e.target.value);\n    } else if (e.target.name === 'confirm-password') {\n      setConfirmPassword(e.target.value);\n    } else if (e.target.name === 'nicename') {\n      setNicename(e.target.value);\n    } else if (e.target.name === 'nickname') {\n      setNickname(e.target.value);\n    } else if (e.target.name === 'firstname') {\n      setFirstname(e.target.value);\n    } else if (e.target.name === 'lastname') {\n      setLastname(e.target.value);\n    } else if (e.target.name === 'phone') {\n      setPhone(e.target.value);\n    }\n  };\n\n  return (\n    <>\n      <main className=\"signup\">\n        <NavigationLoginComponent page={page} />\n\n        <div className=\"signup card\">\n          <form>\n            <table>\n              <tbody>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-username\"\n                      type=\"text\"\n                      name=\"username\"\n                      placeholder=\"Username\"\n                      onChange={handleChange}\n                      required\n                    />\n                    <input\n                      className=\"input-email\"\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder=\"Email\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-password\"\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Password\"\n                      onChange={handleChange}\n                      required\n                    />\n                    <input\n                      className=\"input-password\"\n                      type=\"password\"\n                      name=\"confirm-password\"\n                      placeholder=\"Confirm Password\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-name\"\n                      type=\"text\"\n                      name=\"nicename\"\n                      placeholder=\"Nice Name (eg. /nicename)\"\n                      onChange={handleChange}\n                      required\n                    />\n                    <input\n                      className=\"input-name\"\n                      type=\"text\"\n                      name=\"nickname\"\n                      placeholder=\"Nickname\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-name\"\n                      type=\"text\"\n                      name=\"firstname\"\n                      placeholder=\"First Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                    <input\n                      className=\"input-name\"\n                      type=\"text\"\n                      name=\"lastname\"\n                      placeholder=\"Last Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-phone\"\n                      type=\"tel\"\n                      name=\"phone\"\n                      placeholder=\"Phone\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <td>\n                  <button type=\"submit\" onClick={handleSubmit}>\n                    <h3>SIGN UP</h3>\n                  </button>\n                </td>\n              </tfoot>\n            </table>\n          </form>\n        </div>\n\n        <span className={showStatusbar}>\n          {message !== '' && (\n            <StatusBarComponent messageType={messageType} message={message} />\n          )}\n        </span>\n      </main>\n    </>\n  );\n}\n\nexport default SignUpComponent;\n"],"names":["SignUpComponent","page","_useState","useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","confirmPassword","setConfirmPassword","_useState9","_useState10","nicename","setNicename","_useState11","_useState12","nickname","setNickname","_useState13","_useState14","firstname","setFirstname","_useState15","_useState16","lastname","setLastname","_useState17","_useState18","phone","setPhone","_useState19","_useState20","showStatusbar","setShowStatusBar","_useState21","_useState22","message","setMessage","_useState23","_useState24","messageType","setMessageType","dispatch","useDispatch","_useSelector","useSelector","state","signup","signupStatusCode","signupSuccessMessage","signupErrorMessage","loginSuccessMessage","loginStatusCode","accessToken","refreshToken","useEffect","msg","setTimeout","updateAccessToken","updateRefreshToken","credentials","location","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","wrap","_context","prev","next","preventDefault","stop","_x","apply","arguments","handleChange","target","name","value","jsx","Fragment","children","jsxs","className","NavigationLoginComponent","type","placeholder","onChange","required","onClick","StatusBarComponent"],"mappings":"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"}