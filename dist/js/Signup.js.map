{"version":3,"file":"Signup.js","sources":["../../src/controllers/signupSlice.js","../../src/views/Signup.jsx"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { isValidUsername, isValidPassword, isValidName, isValidPhone } from '../utils/Validation';\n\nconst signupUrl = import.meta.env.VITE_BACKEND_URL ? import.meta.env.VITE_BACKEND_URL + '/signup' : '/wp-json/seven-tech/v1/users/v1/signup';\n\nconst initialState = {\n    signupLoading: false,\n    signupError: '',\n    signupSuccessMessage: '',\n    signupErrorMessage: '',\n};\n\nexport const signup = createAsyncThunk('signup/signup', async (credentials) => {\n    try {\n\n        if (isValidEmail(credentials.email) == false) {\n            throw new Error(\"A valid Email is required to signup.\");\n        }\n\n        if (isValidUsername(credentials.username) == false) {\n            throw new Error(\"A valid Username is required to signup.\");\n        }\n\n        if (isValidPassword(credentials.password) == false) {\n            throw new Error(\"A valid password is required to signup.\");\n        }\n\n        if (credentials.password != credentials.confirmPassword) {\n            throw new Error(\"Please enter your prefered password twice.\");\n        }\n\n        if (isValidName(credentials.firstname) == false) {\n            throw new Error(\"Please provide a valid first name.\");\n        }\n\n        if (isValidName(credentials.lastname) == false) {\n            throw new Error(\"Please provide a valid last name.\");\n        }\n\n        if (isValidPhone(credentials.phone) == false) {\n            throw new Error(\"Please provide a valid phone number.\");\n        }\n// Validate location\n        const response = await fetch(signupUrl, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"email\": credentials.email,\n                \"username\": credentials.username,\n                \"password\": credentials.password,\n                \"confirmPassword\": credentials.confirmPassword,\n                \"firstname\": credentials.firstname,\n                \"lastname\": credentials.lastname,\n                \"phone\": credentials.phone,\n                \"location\": credentials.location\n            })\n        });\n\n        if (!response.ok) {\n            const errorData = await response.json();\n            const errorMessage = errorData.message;\n            throw new Error(errorMessage);\n        }\n\n        const responseData = await response.json();\n        return responseData;\n    } catch (error) {\n        const errorCode = error.code;\n        const errorMessage = error.message;\n\n        return `Error (${errorCode}): ${errorMessage}`;\n    }\n});\n\nexport const signupSlice = createSlice({\n    name: 'signup',\n    initialState,\n    reducers: {},\n    extraReducers: (builder) => {\n        builder\n            .addCase(signup.fulfilled, (state, action) => {\n                state.signupLoading = false;\n                state.signupError = '';\n                state.signupSuccessMessage = action.payload.successMessage;\n                state.signupErrorMessage = action.payload.errorMessage;\n            })\n            .addMatcher(isAnyOf(\n                signup.pending,\n            ), (state) => {\n                state.signupLoading = true;\n                state.signupError = null;\n                state.signupSuccessMessage = null;\n                state.signupErrorMessage = null;\n            })\n            .addMatcher(isAnyOf(\n                signup.rejected,\n            ), (state, action) => {\n                state.signupLoading = false;\n                state.signupError = action.error.stack;\n                state.signupErrorMessage = action.error.message;\n            });\n    }\n})\n\nexport default signupSlice;","import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport NavigationComponent from './components/NavigationLogin';\n\nimport { signup } from '../controllers/signupSlice';\n\nfunction SignUpComponent() {\n  const [UserName, setUserName] = useState('');\n  const [Email, setEmail] = useState('');\n  const [Password, setPassword] = useState('');\n  const [ConfirmPassword, setConfirmPassword] = useState('');\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [phone, setPhone] = useState('');\n  const [message, setMessage] = useState(\n    'Enter the username, email, and password of your choice to sign up.'\n  );\n  const [messageType, setMessageType] = useState('');\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (\n      Password !== '' &&\n      ConfirmPassword !== '' &&\n      Password === ConfirmPassword\n    ) {\n      const msg = 'You have successfully entered your password twice.';\n      setMessage(msg);\n      setMessageType(\"success\");\n    } else if (Password !== '' && Password !== ConfirmPassword) {\n      const msg = 'You have not entered your password twice.';\n      setMessage(msg);\n      setMessageType(\"error\");\n    }\n  }, [Password, ConfirmPassword]);\n\n  const credentials = {\n    username: UserName,\n    email: Email,\n    password: Password,\n    confirmPassword: ConfirmPassword,\n    firstname: firstname,\n    lastname: lastname,\n    phone: phone,\n    location: 'here',\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    dispatch(signup(credentials))\n      .then((response) => {\n        console.log(response);\n\n        setMessage(response);\n        setMessageType(\"success\");\n      })\n      .then(() => {\n        setTimeout(() => {\n          window.location.href = '/login';\n        }, 5000);\n      })\n      .catch((error) => {\n        console.log(error.message);\n        setMessage(error.message);\n        setMessageType(error.message);\n      });\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === 'user-name') {\n      setUserName(e.target.value);\n    } else if (e.target.name === 'email') {\n      setEmail(e.target.value);\n    } else if (e.target.name === 'password') {\n      setPassword(e.target.value);\n    } else if (e.target.name === 'confirm-password') {\n      setConfirmPassword(e.target.value);\n    } else if (e.target.name === 'firstname') {\n      setFirstname(e.target.value);\n    } else if (e.target.name === 'lastname') {\n      setLastname(e.target.value);\n    } else if (e.target.name === 'phone') {\n      setPhone(e.target.value);\n    }\n  };\n\n  return (\n    <>\n      <main className=\"signup\">\n        <NavigationComponent />\n\n        <div className=\"login card\">\n          <form>\n            <table>\n              <thead></thead>\n              <tbody>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"user-name\"\n                      placeholder=\"User Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder=\"Email\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Password\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"password\"\n                      name=\"confirm-password\"\n                      placeholder=\"Confirm Password\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"firstname\"\n                      placeholder=\"First Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"lastname\"\n                      placeholder=\"Last Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"phone\"\n                      placeholder=\"Phone\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <td>\n                  <button type=\"submit\" onClick={handleSubmit}>\n                    <h3>SIGN UP</h3>\n                  </button>\n                </td>\n              </tfoot>\n            </table>\n          </form>\n        </div>\n\n        {message !== '' && (\n          <div className={`status-bar card ${messageType}`}>\n            <span>{message}</span>\n          </div>\n        )}\n      </main>\n    </>\n  );\n}\n\nexport default SignUpComponent;\n"],"names":["define_import_meta_env_default","VITE_API_KEY","VITE_AUTH_DOMAIN","VITE_DATABASE_URL","VITE_PROJECT_ID","VITE_STORAGE_BUCKET","VITE_MESSAGING_SENDER_ID","VITE_APP_ID","VITE_MEASUREMENT_ID","BASE_URL","MODE","DEV","PROD","SSR","SignUpComponent","_useState","useState","_useState2","_slicedToArray","UserName","setUserName","_useState3","_useState4","Email","setEmail","_useState5","_useState6","Password","setPassword","_useState7","_useState8","ConfirmPassword","setConfirmPassword","_useState9","_useState10","firstname","setFirstname","_useState11","_useState12","lastname","setLastname","_useState13","_useState14","phone","setPhone","_useState15","_useState16","message","setMessage","_useState17","_useState18","messageType","setMessageType","dispatch","useDispatch","useEffect","msg","credentials","username","email","password","confirmPassword","location","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","wrap","_context","prev","next","preventDefault","signup","then","response","console","log","setTimeout","window","href","catch","error","stop","_x","apply","arguments","handleChange","target","name","value","jsx","Fragment","children","jsxs","className","NavigationComponent","type","placeholder","onChange","required","onClick","concat"],"mappings":"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"}