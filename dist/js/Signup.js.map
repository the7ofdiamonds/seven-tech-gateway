{"version":3,"file":"Signup.js","sources":["../../src/views/Signup.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport NavigationLoginComponent from './components/NavigationLoginComponent';\nimport StatusBarComponent from './components/StatusBarComponent';\n\nimport { signup } from '../controllers/signupSlice';\nimport {\n  updateAccessToken,\n  updateRefreshToken,\n} from '../controllers/loginSlice';\n\nfunction SignUpComponent() {\n  let page = 'signup';\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [nicename, setNicename] = useState('');\n  const [nickname, setNickname] = useState('');\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [phone, setPhone] = useState('');\n\n  const [showStatusbar, setShowStatusBar] = useState('');\n  const [message, setMessage] = useState(\n    'Enter the username, email, and password of your choice to sign up.'\n  );\n  const [messageType, setMessageType] = useState('');\n\n  const dispatch = useDispatch();\n\n  const {\n    signupStatusCode,\n    signupSuccessMessage,\n    signupErrorMessage,\n    accessToken,\n    refreshToken,\n  } = useSelector((state) => state.signup);\n\n  useEffect(() => {\n    if (\n      password !== '' &&\n      confirmPassword !== '' &&\n      password === confirmPassword\n    ) {\n      const msg = 'You have successfully entered your password twice.';\n      setMessage(msg);\n      setMessageType('success');\n    } else if (password !== '' && password !== confirmPassword) {\n      const msg = 'You have not entered your password twice.';\n      setMessage(msg);\n      setMessageType('error');\n    }\n  }, [password, confirmPassword]);\n\n  useEffect(() => {\n    if (\n      signupStatusCode == 200 &&\n      signupSuccessMessage &&\n      accessToken &&\n      refreshToken\n    ) {\n      setMessageType('success');\n      setMessage(signupSuccessMessage);\n    }\n  }, [signupStatusCode, signupSuccessMessage, accessToken, refreshToken]);\n\n  useEffect(() => {\n    if (signupErrorMessage) {\n      setMessageType('error');\n      setMessage(signupErrorMessage);\n    }\n  }, [signupErrorMessage]);\n\n  useEffect(() => {\n    if (signupSuccessMessage != '') {\n      setShowStatusBar('modal-overlay');\n    }\n  }, [signupSuccessMessage]);\n\n  useEffect(() => {\n    if (accessToken && refreshToken) {\n      dispatch(updateAccessToken(accessToken));\n      dispatch(updateRefreshToken(refreshToken));\n    }\n  }, [dispatch, accessToken, refreshToken]);\n\n  useEffect(() => {\n    if (accessToken && refreshToken && signupStatusCode == 200) {\n      const urlParams = new URLSearchParams(window.location.search);\n      const redirectTo = urlParams.get('redirectTo');\n\n      setTimeout(() => {\n        if (redirectTo == null) {\n          window.location.href = '/dashboard';\n        } else {\n          window.location.href = redirectTo;\n        }\n      }, 7000);\n    }\n  }, [dispatch, accessToken, refreshToken, signupStatusCode]);\n\n  const credentials = {\n    username: username,\n    email: email,\n    password: password,\n    confirmPassword: confirmPassword,\n    nicename: nicename,\n    nickname: nickname,\n    firstname: firstname,\n    lastname: lastname,\n    phone: phone,\n    location: 'here',\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    dispatch(signup(credentials));\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === 'username') {\n      setUsername(e.target.value);\n    } else if (e.target.name === 'email') {\n      setEmail(e.target.value);\n    } else if (e.target.name === 'password') {\n      setPassword(e.target.value);\n    } else if (e.target.name === 'confirm-password') {\n      setConfirmPassword(e.target.value);\n    } else if (e.target.name === 'nicename') {\n      setNicename(e.target.value);\n    } else if (e.target.name === 'nickname') {\n      setNickname(e.target.value);\n    } else if (e.target.name === 'firstname') {\n      setFirstname(e.target.value);\n    } else if (e.target.name === 'lastname') {\n      setLastname(e.target.value);\n    } else if (e.target.name === 'phone') {\n      setPhone(e.target.value);\n    }\n  };\n\n  return (\n    <>\n      <main className=\"signup\">\n        <NavigationLoginComponent page={page} />\n\n        <div className=\"signup card\">\n          <form>\n            <table>\n              <tbody>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-username\"\n                      type=\"text\"\n                      name=\"username\"\n                      placeholder=\"Username\"\n                      onChange={handleChange}\n                      required\n                    />\n                    <input\n                      className=\"input-email\"\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder=\"Email\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-password\"\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Password\"\n                      onChange={handleChange}\n                      required\n                    />\n                    <input\n                      className=\"input-password\"\n                      type=\"password\"\n                      name=\"confirm-password\"\n                      placeholder=\"Confirm Password\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-name\"\n                      type=\"text\"\n                      name=\"nicename\"\n                      placeholder=\"Nice Name (eg. /nicename)\"\n                      onChange={handleChange}\n                      required\n                    />\n                    <input\n                      className=\"input-name\"\n                      type=\"text\"\n                      name=\"nickname\"\n                      placeholder=\"Nickname\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-name\"\n                      type=\"text\"\n                      name=\"firstname\"\n                      placeholder=\"First Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                    <input\n                      className=\"input-name\"\n                      type=\"text\"\n                      name=\"lastname\"\n                      placeholder=\"Last Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      className=\"input-phone\"\n                      type=\"tel\"\n                      name=\"phone\"\n                      placeholder=\"Phone\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <td>\n                  <button type=\"submit\" onClick={handleSubmit} id=\"signup_btn\">\n                    <h3>SIGN UP</h3>\n                  </button>\n                </td>\n              </tfoot>\n            </table>\n          </form>\n        </div>\n\n        <span className={showStatusbar}>\n          {message !== '' && (\n            <StatusBarComponent messageType={messageType} message={message} />\n          )}\n        </span>\n      </main>\n    </>\n  );\n}\n\nexport default SignUpComponent;\n"],"names":["SignUpComponent","page","_useState","useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","confirmPassword","setConfirmPassword","_useState9","_useState10","nicename","setNicename","_useState11","_useState12","nickname","setNickname","_useState13","_useState14","firstname","setFirstname","_useState15","_useState16","lastname","setLastname","_useState17","_useState18","phone","setPhone","_useState19","_useState20","showStatusbar","setShowStatusBar","_useState21","_useState22","message","setMessage","_useState23","_useState24","messageType","setMessageType","dispatch","useDispatch","_useSelector","useSelector","state","signup","signupStatusCode","signupSuccessMessage","signupErrorMessage","accessToken","refreshToken","useEffect","msg","updateAccessToken","updateRefreshToken","urlParams","URLSearchParams","window","location","search","redirectTo","get","setTimeout","href","credentials","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","wrap","_context","prev","next","preventDefault","stop","_x","apply","arguments","handleChange","target","name","value","jsx","Fragment","children","jsxs","className","NavigationLoginComponent","type","placeholder","onChange","required","onClick","id","StatusBarComponent"],"mappings":"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"}