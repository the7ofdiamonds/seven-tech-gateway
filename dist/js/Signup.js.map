{"version":3,"file":"Signup.js","sources":["../../src/controllers/signupSlice.js","../../src/views/Signup.jsx"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\nconst apiUrl = import.meta.env.VITE_BACKEND_URL ? import.meta.env.VITE_BACKEND_URL + '/signup' : '/wp-json/thfw/users/v1/signup';\n\nconst initialState = {\n    signupLoading: false,\n    signupError: '',\n    signupMessage: '',\n    signupMessageType: '',\n};\n\nexport const signup = createAsyncThunk('signup/signup', async (credentials) => {\n    try {\n\n        await fetch(apiUrl, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"username\": credentials.username,\n                \"email\": credentials.email,\n                \"password\": credentials.password,\n                \"confirmPassword\": credentials.confirmPassword,\n                \"firstname\": credentials.firstname,\n                \"lastname\": credentials.lastname,\n                \"phone\": credentials.phone,\n                \"location\": credentials.location\n            })\n        });\n\n        if (!response.ok) {\n            const errorData = await response.json();\n            const errorMessage = errorData.message;\n            throw new Error(errorMessage);\n        }\n\n        const responseData = await response.json();\n        return responseData;\n    } catch (error) {\n        const errorCode = error.code;\n        const errorMessage = error.message;\n\n        return `Error (${errorCode}): ${errorMessage}`;\n    }\n});\n\nexport const signupSlice = createSlice({\n    name: 'signup',\n    initialState,\n    reducers: {\n        updateAccessToken: (state, action) => {\n            state.accessToken = action.payload;\n        },\n        updateRefreshToken: (state, action) => {\n            state.refreshToken = action.payload;\n        }\n    },\n    extraReducers: (builder) => {\n        builder\n            .addCase(signIn.fulfilled, (state, action) => {\n                state.signupLoading = false;\n                state.signupError = '';\n                state.signupMessage = action.payload.message;\n                state.signupMessageType = action.payload.message_type;\n                state.customToken = action.payload.custom_token;\n            })\n            .addMatcher(isAnyOf(\n                signIn.pending,\n            ), (state) => {\n                state.signupLoading = true;\n                state.signupError = null;\n            })\n            .addMatcher(isAnyOf(\n                signIn.rejected,\n            ),\n                (state, action) => {\n                    state.signupLoading = false;\n                    state.signupError = action.error.stack;\n                    state.signupMessageType = 'error';\n                    state.signupMessage = action.error.message;\n                });\n    }\n})\n\nexport default signupSlice;","import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport NavigationComponent from './components/NavigationLogin';\n\nimport { signup } from '../controllers/signupSlice';\n\nfunction SignUpComponent() {\n  const [UserName, setUserName] = useState('');\n  const [Email, setEmail] = useState('');\n  const [Password, setPassword] = useState('');\n  const [ConfirmPassword, setConfirmPassword] = useState('');\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [phone, setPhone] = useState('');\n  const [message, setMessage] = useState(\n    'Enter the username, email, and password of your choice to sign up.'\n  );\n  const [messageType, setMessageType] = useState('');\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (\n      Password !== '' &&\n      ConfirmPassword !== '' &&\n      Password === ConfirmPassword\n    ) {\n      const msg = 'You have successfully entered your password twice.';\n      setMessage(msg);\n      setMessageType(\"success\");\n    } else if (Password !== '' && Password !== ConfirmPassword) {\n      const msg = 'You have not entered your password twice.';\n      setMessage(msg);\n      setMessageType(\"error\");\n    }\n  }, [Password, ConfirmPassword]);\n\n  const credentials = {\n    username: UserName,\n    email: Email,\n    password: Password,\n    confirmPassword: ConfirmPassword,\n    firstname: firstname,\n    lastname: lastname,\n    phone: phone,\n    location: 'here',\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    dispatch(signup(credentials))\n      .then((response) => {\n        console.log(response);\n\n        setMessage(response);\n        setMessageType(\"success\");\n      })\n      .then(() => {\n        setTimeout(() => {\n          window.location.href = '/login';\n        }, 5000);\n      })\n      .catch((error) => {\n        console.log(error.message);\n        setMessage(error.message);\n        setMessageType(error.message);\n      });\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === 'user-name') {\n      setUserName(e.target.value);\n    } else if (e.target.name === 'email') {\n      setEmail(e.target.value);\n    } else if (e.target.name === 'password') {\n      setPassword(e.target.value);\n    } else if (e.target.name === 'confirm-password') {\n      setConfirmPassword(e.target.value);\n    } else if (e.target.name === 'firstname') {\n      setFirstname(e.target.value);\n    } else if (e.target.name === 'lastname') {\n      setLastname(e.target.value);\n    } else if (e.target.name === 'phone') {\n      setPhone(e.target.value);\n    }\n  };\n\n  return (\n    <>\n      <main className=\"signup\">\n        <NavigationComponent />\n\n        <div className=\"login card\">\n          <form>\n            <table>\n              <thead></thead>\n              <tbody>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"user-name\"\n                      placeholder=\"User Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder=\"Email\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Password\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"password\"\n                      name=\"confirm-password\"\n                      placeholder=\"Confirm Password\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"firstname\"\n                      placeholder=\"First Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"lastname\"\n                      placeholder=\"Last Name\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"text\"\n                      name=\"phone\"\n                      placeholder=\"Phone\"\n                      onChange={handleChange}\n                      required\n                    />\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <td>\n                  <button type=\"submit\" onClick={handleSubmit}>\n                    <h3>SIGN UP</h3>\n                  </button>\n                </td>\n              </tfoot>\n            </table>\n          </form>\n        </div>\n\n        {message !== '' && (\n          <div className={`status-bar card ${messageType}`}>\n            <span>{message}</span>\n          </div>\n        )}\n      </main>\n    </>\n  );\n}\n\nexport default SignUpComponent;\n"],"names":["apiUrl","initialState","signupLoading","signupError","signupMessage","signupMessageType","signup","createAsyncThunk","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","credentials","errorData","errorMessage","responseData","errorCode","_errorMessage","wrap","_context","prev","next","fetch","method","headers","body","JSON","stringify","username","email","password","confirmPassword","firstname","lastname","phone","location","response","ok","json","sent","message","Error","abrupt","t0","code","concat","stop","_x","apply","arguments","createSlice","name","reducers","updateAccessToken","state","action","accessToken","payload","updateRefreshToken","refreshToken","extraReducers","builder","addCase","signIn","fulfilled","message_type","customToken","custom_token","addMatcher","isAnyOf","pending","rejected","error","stack","SignUpComponent","_useState","useState","_useState2","_slicedToArray","UserName","setUserName","_useState3","_useState4","Email","setEmail","_useState5","_useState6","Password","setPassword","_useState7","_useState8","ConfirmPassword","setConfirmPassword","_useState9","_useState10","setFirstname","_useState11","_useState12","setLastname","_useState13","_useState14","setPhone","_useState15","_useState16","setMessage","_useState17","_useState18","messageType","setMessageType","dispatch","useDispatch","useEffect","msg","handleSubmit","e","preventDefault","then","console","log","setTimeout","window","href","catch","handleChange","target","value","jsx","Fragment","children","jsxs","className","NavigationComponent","type","placeholder","onChange","required","onClick"],"mappings":"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"}