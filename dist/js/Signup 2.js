import{c as Z,a as ee,b as V,d as j,i as ae,e as I,f as se,g as re,r as t,_ as i,j as e}from"./index.js";import{N as ne}from"./NavigationLoginComponent.js";import{u as te}from"./useDispatch.js";var D={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ie=D.VITE_BACKEND_URL?D.VITE_BACKEND_URL+"/signup":"/wp-json/seven-tech/v1/users/v1/signup",ue={signupLoading:!1,signupError:"",signupSuccessMessage:"",signupErrorMessage:""},v=Z("signup/signup",function(){var c=V(j().mark(function u(a){var n,m,d,f,h,g;return j().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,isValidEmail(a.email)!=!1){s.next=3;break}throw new Error("A valid Email is required to signup.");case 3:if(re(a.username)!=!1){s.next=5;break}case 5:if(se(a.password)!=!1){s.next=7;break}case 7:if(a.password==a.confirmPassword){s.next=9;break}throw new Error("Please enter your prefered password twice.");case 9:if(I(a.firstname)!=!1){s.next=11;break}throw new Error("Please provide a valid first name.");case 11:if(I(a.lastname)!=!1){s.next=13;break}throw new Error("Please provide a valid last name.");case 13:if(ae(a.phone)!=!1){s.next=15;break}case 15:return s.next=17,fetch(ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,username:a.username,password:a.password,confirmPassword:a.confirmPassword,firstname:a.firstname,lastname:a.lastname,phone:a.phone,location:a.location})});case 17:if(n=s.sent,n.ok){s.next=24;break}return s.next=21,n.json();case 21:throw m=s.sent,d=m.message,new Error(d);case 24:return s.next=26,n.json();case 26:return f=s.sent,s.abrupt("return",f);case 30:return s.prev=30,s.t0=s.catch(0),h=s.t0.code,g=s.t0.message,s.abrupt("return","Error (".concat(h,"): ").concat(g));case 35:case"end":return s.stop()}},u,null,[[0,30]])}));return function(u){return c.apply(this,arguments)}}());ee({name:"signup",initialState:ue,reducers:{},extraReducers:function(u){u.addCase(v.fulfilled,function(a,n){a.signupLoading=!1,a.signupError="",a.signupSuccessMessage=n.payload.successMessage,a.signupErrorMessage=n.payload.errorMessage}).addMatcher(isAnyOf(v.pending),function(a){a.signupLoading=!0,a.signupError=null,a.signupSuccessMessage=null,a.signupErrorMessage=null}).addMatcher(isAnyOf(v.rejected),function(a,n){a.signupLoading=!1,a.signupError=n.error.stack,a.signupErrorMessage=n.error.message})}});function ce(){var c=t.useState(""),u=i(c,2),a=u[0],n=u[1],m=t.useState(""),d=i(m,2),f=d[0],h=d[1],g=t.useState(""),x=i(g,2),s=x[0],k=x[1],R=t.useState(""),y=i(R,2),p=y[0],U=y[1],L=t.useState(""),b=i(L,2),O=b[0],q=b[1],B=t.useState(""),P=i(B,2),G=P[0],F=P[1],K=t.useState(""),C=i(K,2),z=C[0],J=C[1],Y=t.useState("Enter the username, email, and password of your choice to sign up."),T=i(Y,2),N=T[0],S=T[1],H=t.useState(""),A=i(H,2),$=A[0],w=A[1],Q=te();t.useEffect(function(){if(s!==""&&p!==""&&s===p){var E="You have successfully entered your password twice.";S(E),w("success")}else if(s!==""&&s!==p){var r="You have not entered your password twice.";S(r),w("error")}},[s,p]);var W={username:a,email:f,password:s,confirmPassword:p,firstname:O,lastname:G,phone:z,location:"here"},X=function(){var E=V(j().mark(function r(M){return j().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:M.preventDefault(),Q(v(W)).then(function(l){console.log(l),S(l),w("success")}).then(function(){setTimeout(function(){window.location.href="/login"},5e3)}).catch(function(l){console.log(l.message),S(l.message),w(l.message)});case 2:case"end":return _.stop()}},r)}));return function(M){return E.apply(this,arguments)}}(),o=function(r){r.target.name==="user-name"?n(r.target.value):r.target.name==="email"?h(r.target.value):r.target.name==="password"?k(r.target.value):r.target.name==="confirm-password"?U(r.target.value):r.target.name==="firstname"?q(r.target.value):r.target.name==="lastname"?F(r.target.value):r.target.name==="phone"&&J(r.target.value)};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"signup",children:[e.jsx(ne,{}),e.jsx("div",{className:"login card",children:e.jsx("form",{children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"user-name",placeholder:"User Name",onChange:o,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",onChange:o,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",onChange:o,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"confirm-password",placeholder:"Confirm Password",onChange:o,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",onChange:o,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",onChange:o,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"phone",placeholder:"Phone",onChange:o,required:!0})})})]}),e.jsx("tfoot",{children:e.jsx("td",{children:e.jsx("button",{type:"submit",onClick:X,children:e.jsx("h3",{children:"SIGN UP"})})})})]})})}),N!==""&&e.jsx("div",{className:"status-bar card ".concat($),children:e.jsx("span",{children:N})})]})})}export{ce as default};
//# sourceMappingURL=Signup.js.map
