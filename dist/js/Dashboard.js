import{f as M,g as $e,i as W,c as I,d as S,h as he,k as He,m as We,u as C,r as u,_ as v,j as r,n as de,o as Qe,e as Xe,l as Ye,p as Ze,q as ea}from"./index.js";import aa from"./Login.js";import{u as ge,S as ra}from"./StatusBarComponent.js";import"./NavigationLoginComponent.js";var E={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},sa=E.VITE_BACKEND_URL?E.VITE_BACKEND_URL+"/change-name":"/wp-json/seven-tech/v1/user/change-name",na=E.VITE_BACKEND_URL?E.VITE_BACKEND_URL+"/change-phone":"/wp-json/seven-tech/v1/user/change-phone",ta=E.VITE_BACKEND_URL?E.VITE_BACKEND_URL+"/change-username":"/wp-json/seven-tech/v1/user/change-username",oa=E.VITE_BACKEND_URL?E.VITE_BACKEND_URL+"/change-nicename":"/wp-json/seven-tech/v1/user/change-nicename",ca=E.VITE_BACKEND_URL?E.VITE_BACKEND_URL+"/add-role":"/wp-json/seven-tech/v1/user/roles/add-role",ua=E.VITE_BACKEND_URL?E.VITE_BACKEND_URL+"/remove-role":"/wp-json/seven-tech/v1/user/roles/remove-role",ia={changeLoading:!1,changeError:"",changeSuccessMessage:"",changeErrorMessage:"",changeStatusCode:"",username:"",firstname:"",lastname:"",phone:"",nicename:"",role:""},F=M("change/changeName",function(){var t=I(S().mark(function o(s){var n,l,i,d,e;return S().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=s.firstName,l=s.lastName,a.prev=1,i=localStorage.getItem("access_token"),i){a.next=5;break}throw new Error("An access token is required to change your name.");case 5:if(n){a.next=7;break}throw new Error("The first name is blank.");case 7:if(l){a.next=9;break}throw new Error("The last name is blank.");case 9:if(he(n)){a.next=11;break}throw new Error("The first name provided is not valid.");case 11:if(he(l)){a.next=13;break}throw new Error("The last name provided is not valid.");case 13:return a.next=15,fetch(sa,{method:"POST",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},body:JSON.stringify({firstName:n,lastName:l})});case 15:return d=a.sent,a.next=18,d.json();case 18:return e=a.sent,a.abrupt("return",e);case 22:throw a.prev=22,a.t0=a.catch(1),console.error(a.t0),new Error(a.t0.message);case 26:case"end":return a.stop()}},o,null,[[1,22]])}));return function(o){return t.apply(this,arguments)}}()),q=M("change/changePhone",function(){var t=I(S().mark(function o(s){var n,l,i;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=localStorage.getItem("access_token"),n!=""){e.next=4;break}throw Error("An access token is required to change your phone number.");case 4:if(He(s)==!0){e.next=6;break}throw Error("There was an error changing your phone number.");case 6:return e.next=8,fetch("".concat(na),{method:"POST",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},body:JSON.stringify({phone:s})});case 8:return l=e.sent,e.next=11,l.json();case 11:return i=e.sent,e.abrupt("return",i);case 15:throw e.prev=15,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0.message);case 19:case"end":return e.stop()}},o,null,[[0,15]])}));return function(o){return t.apply(this,arguments)}}()),z=M("change/changeUsername",function(){var t=I(S().mark(function o(s){var n,l,i;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=localStorage.getItem("access_token"),n!=""){e.next=4;break}throw Error("An access token is required to change your username.");case 4:if(We(s)==!0){e.next=6;break}throw Error("There was an error changing your username.");case 6:return e.next=8,fetch("".concat(ta),{method:"POST",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},body:JSON.stringify({username:s})});case 8:return l=e.sent,e.next=11,l.json();case 11:return i=e.sent,e.abrupt("return",i);case 15:throw e.prev=15,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0.message);case 19:case"end":return e.stop()}},o,null,[[0,15]])}));return function(o){return t.apply(this,arguments)}}()),Q=M("change/changeUserNicename",function(){var t=I(S().mark(function o(s){var n,l,i;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=localStorage.getItem("access_token"),n!=""){e.next=4;break}throw Error("An access token is required to change your username.");case 4:return e.next=6,fetch("".concat(oa),{method:"POST",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},body:JSON.stringify({nicename:s})});case 6:return l=e.sent,e.next=9,l.json();case 9:return i=e.sent,e.abrupt("return",i);case 13:throw e.prev=13,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0.message);case 17:case"end":return e.stop()}},o,null,[[0,13]])}));return function(o){return t.apply(this,arguments)}}()),X=M("change/addUserRole",function(){var t=I(S().mark(function o(s){var n,l,i,d,e;return S().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=s.roleName,l=s.roleDisplayName,a.prev=1,i=localStorage.getItem("access_token"),i!=""){a.next=5;break}throw Error("An access token is required to change your role.");case 5:return a.next=7,fetch("".concat(ca),{method:"POST",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},body:JSON.stringify({role_name:n,role_display_name:l})});case 7:return d=a.sent,a.next=10,d.json();case 10:return e=a.sent,a.abrupt("return",e);case 14:throw a.prev=14,a.t0=a.catch(1),console.error(a.t0),new Error(a.t0.message);case 18:case"end":return a.stop()}},o,null,[[1,14]])}));return function(o){return t.apply(this,arguments)}}()),Y=M("change/removeUserRole",function(){var t=I(S().mark(function o(s){var n,l,i,d,e;return S().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=s.roleName,l=s.roleDisplayName,a.prev=1,i=localStorage.getItem("access_token"),i!=""){a.next=5;break}throw Error("An access token is required to change your role.");case 5:return a.next=7,fetch("".concat(ua),{method:"POST",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},body:JSON.stringify({role_name:n,role_display_name:l})});case 7:return d=a.sent,a.next=10,d.json();case 10:return e=a.sent,a.abrupt("return",e);case 14:throw a.prev=14,a.t0=a.catch(1),console.error(a.t0),new Error(a.t0.message);case 18:case"end":return a.stop()}},o,null,[[1,14]])}));return function(o){return t.apply(this,arguments)}}());$e({name:"change",initialState:ia,reducers:{updateChangeSuccessMessage:function(o,s){o.changeSuccessMessage=s.payload},updateChangeErrorMessage:function(o,s){o.changeError=s.payload,o.changeErrorMessage=s.payload}},extraReducers:function(o){o.addMatcher(W(F.fulfilled,q.fulfilled,z.fulfilled,Q.fulfilled,X.fulfilled,Y.fulfilled),function(s,n){s.changeLoading=!1,s.changeError="",s.changeSuccessMessage=n.payload.successMessage,s.changeErrorMessage=n.payload.errorMessage,s.changeStatusCode=n.payload.statusCode,s.username=n.payload.username,s.firstname=n.payload.firstname,s.lastname=n.payload.lastname,s.phone=n.payload.phone,s.nicename=n.payload.nicename,s.role=n.payload.role}).addMatcher(W(F.pending,q.pending,z.pending,Q.pending,X.pending,Y.pending),function(s){s.changeLoading=!0,s.changeError=null,s.changeSuccessMessage="",s.changeErrorMessage="",s.changeStatusCode=""}).addMatcher(W(F.rejected,q.rejected,z.rejected,Q.rejected,X.rejected,Y.rejected),function(s,n){s.changeLoading=!1,s.changeError=n.error,s.changeErrorMessage=n.error.message,s.changeStatusCode=n.error.code})}});function la(){var t=ge(),o=C(function(h){return h.user}),s=o.changeLoading;o.changeError;var n=o.changeSuccessMessage,l=o.changeErrorMessage,i=o.changeStatusCode,d=C(function(h){return h.email}),e=d.emailLoading;d.emailError;var N=d.emailSuccessMessage,a=d.emailErrorMessage,L=d.emailStatusCode,j=C(function(h){return h.password}),_=j.passwordLoading;j.passwordError;var T=j.passwordSuccessMessage,P=j.passwordErrorMessage,A=j.passwordStatusCode,k=C(function(h){return h.logout});k.logoutLoading,k.logoutError;var b=k.logoutSuccessMessage,w=k.logoutErrorMessage,f=C(function(h){return h.account}),O=f.accountLoading;f.accountError;var U=f.accountSuccessMessage,R=f.accountErrorMessage,D=f.accountStatusCode,y=f.email,g=f.username,me=f.firstname,fe=f.lastname,pe=f.phone,ve=u.useState(me),Z=v(ve,2),G=Z[0],Se=Z[1],Ee=u.useState(fe),ee=v(Ee,2),J=ee[0],Ce=ee[1],we=u.useState(g),ae=v(we,2),x=ae[0],Ne=ae[1],je=u.useState(""),re=v(je,2),B=re[0],ye=re[1],Te=u.useState(""),se=v(Te,2),V=se[0],Ae=se[1],ke=u.useState(pe),ne=v(ke,2),$=ne[0],be=ne[1],Ue=u.useState(""),te=v(Ue,2);te[0],te[1];var De=u.useState(""),oe=v(De,2),Me=oe[0],ce=oe[1],Ie=u.useState(""),ue=v(Ie,2),Le=ue[0],p=ue[1],Pe=u.useState(""),ie=v(Pe,2),K=ie[0],m=ie[1];u.useEffect(function(){(O||s||e||_)&&m("")},[t,O,s,e,_]),u.useEffect(function(){b&&(p("success"),m(b))},[t,b]),u.useEffect(function(){n&&(p("success"),m(n))},[t,n]),u.useEffect(function(){N&&(p("success"),m(N))},[t,N]),u.useEffect(function(){T&&(p("success"),m(T))},[t,T]),u.useEffect(function(){U&&(p("success"),m(U))},[t,U]),u.useEffect(function(){w&&(p("error"),m(w))},[t,w]),u.useEffect(function(){w&&(p("error"),m(w))},[t,w]),u.useEffect(function(){l&&i!=403&&(p("error"),m(l))},[t,l]),u.useEffect(function(){a&&L!=403&&(p("error"),m(a))},[t,a]),u.useEffect(function(){P&&A!=403&&(p("error"),m(P))},[t,P]),u.useEffect(function(){R&&D!=403&&(p("error"),m(R))},[t,R]),u.useEffect(function(){(i!=403||L!=403||A!=403||D!=403)&&K!=""&&(ce("modal-overlay"),setTimeout(function(){ce("")},3e3))},[t,i,L,A,D,K]);var Re=function(c){c.preventDefault(),c.target.name=="firstname"&&Se(c.target.value)},_e=function(c){c.preventDefault(),c.target.name=="lastname"&&Ce(c.target.value)},Oe=function(c){c.preventDefault(),(G!==""||J!=="")&&t(F({firstName:G,lastName:J})).then(function(H){H.payload.statusCode==201&&(t(updateAccountFirstName(H.payload.firstname)),t(updateAccountLastName(H.payload.lastname)))})},Be=function(c){c.preventDefault(),c.target.name=="username"&&Ne(c.target.value)},Ve=function(c){c.preventDefault(),x!=""&&t(z(x))},le=function(c){c.preventDefault(),c.target.name=="password"&&ye(c.target.value),c.target.name=="confirmPassword"&&Ae(c.target.value)},Ke=function(c){c.preventDefault(),B==V&&B!=""&&V!=""&&t(Qe({password:B,confirmPassword:V}))},Fe=function(c){c.preventDefault(),y!=""||localStorage.getItem("email")!=""?t(Xe(y||localStorage.getItem("email"))):(p("error"),m("An email is required to reset password."))},qe=function(c){c.preventDefault(),c.target.name=="phone"&&be(c.target.value)},ze=function(c){c.preventDefault(),$!=""&&t(q($))},Ge=function(){t(Ye()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Je=function(){de!=null&&t(Ze()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},xe=function(){y!=""||localStorage.getItem("email")!=""?t(ea(y||localStorage.getItem("email"))):(p("error"),m("An email is required to remove your account."))};return r.jsx(r.Fragment,{children:r.jsxs("main",{className:"settings",children:[r.jsx("h2",{children:"Settings"}),r.jsxs("span",{className:"change-name",children:[r.jsx("input",{className:"input-name",type:"text",name:"firstname",placeholder:"First Name",value:G,onChange:Re}),r.jsx("input",{className:"input-name",type:"text",name:"lastname",placeholder:"Last Name",value:J,onChange:_e}),r.jsx("div",{className:"action",children:r.jsx("button",{onClick:Oe,children:r.jsx("h3",{children:"Change Name"})})})]}),r.jsxs("span",{className:"change-username",children:[r.jsx("input",{className:"input-username",type:"text",name:"username",placeholder:"Username",value:x,onChange:Be}),r.jsx("div",{className:"action",children:r.jsx("button",{onClick:Ve,children:r.jsx("h3",{children:"Change Username"})})})]}),r.jsxs("span",{className:"change-phone",children:[r.jsx("input",{className:"input-phone",type:"text",name:"phone",placeholder:"Phone Number",value:$,onChange:qe}),r.jsx("div",{className:"action",children:r.jsx("button",{onClick:ze,children:r.jsx("h3",{children:"Change Phone"})})})]}),r.jsxs("span",{className:"change-password",children:[r.jsx("input",{className:"input-password",type:"password",name:"password",placeholder:"Password",value:B,onChange:le}),r.jsx("input",{className:"input-password",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:V,onChange:le}),r.jsx("div",{className:"action",children:r.jsx("button",{onClick:Ke,children:r.jsx("h3",{children:"Change Password"})})})]}),r.jsx("span",{className:"forgot-password",children:r.jsx("button",{onClick:Fe,children:r.jsx("h3",{children:"FORGOT PASSWORD"})})}),r.jsxs("span",{className:"logout",children:[r.jsx("button",{onClick:Ge,children:r.jsx("h3",{children:"LOG OUT"})}),de!=null&&r.jsx("button",{onClick:Je,children:r.jsx("h3",{children:"LOG OUT ALL"})})]}),r.jsx("span",{className:"remove-account",children:r.jsx("button",{onClick:xe,children:r.jsx("h3",{children:"REMOVE ACCOUNT"})})}),r.jsx("span",{className:Me,children:K!=""&&r.jsx(ra,{messageType:Le,message:K})})]})})}function fa(){var t=ge(),o=C(function(g){return g.login}),s=o.profileImage,n=o.displayName,l=s||localStorage.getItem("profile_image"),i=n||localStorage.getItem("display_name"),d=C(function(g){return g.user}),e=d.changeStatusCode,N=C(function(g){return g.email}),a=N.emailStatusCode,L=C(function(g){return g.password}),j=L.passwordStatusCode,_=C(function(g){return g.login}),T=_.loginStatusCode,P=C(function(g){return g.account}),A=P.accountStatusCode,k=u.useState(""),b=v(k,2),w=b[0],f=b[1],O=u.useState(!1),U=v(O,2),R=U[0],D=U[1];u.useEffect(function(){T==200&&D(!1)},[T]),u.useEffect(function(){(e==403||a==403||j==403||A==403)&&D(!0)},[t,e,a,j,A]);var y=function(){w==!1&&f(!0),w==!0&&f(!1)};return r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"title",children:"Dashboard"}),r.jsxs("div",{className:"header",children:[r.jsx("div",{className:"profile-image",children:r.jsx("img",{src:"".concat(l),alt:""})}),r.jsx("h2",{className:"display-name",children:i}),r.jsx("div",{className:"options",children:r.jsx("button",{className:"settings-button",onClick:y,children:r.jsx("i",{class:"fa-solid fa-gears"})})})]}),w&&r.jsx(la,{}),R&&r.jsx("div",{className:"modal-overlay",children:r.jsx("main",{className:"login",children:r.jsx(aa,{})})})]})}export{fa as default};
//# sourceMappingURL=Dashboard.js.map
