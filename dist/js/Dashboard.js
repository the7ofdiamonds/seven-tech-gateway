import{u as P,r as a,_ as r,g as te,j as e,f as we,i as se,h as Ee,k as ye,m as ke,n as Le,o as Y,p as be,q as Me,l as Pe,t as Te,v as De,w as Ue}from"./index.js";import{u as q,S as V}from"./StatusBarComponent.js";import{L as Ae}from"./LoginComponent.js";function Fe(){var n=q(),t=P(function(M){return M.account}),i=t.accountLoading;t.accountError;var o=t.accountSuccessMessage,f=t.accountErrorMessage,c=t.accountStatusCode,u=t.email,g=P(function(M){return M.login}),l=g.loginStatusCode,x=a.useState(!1),p=r(x,2),j=p[0],S=p[1];a.useEffect(function(){l==200&&S(!1)},[l]),a.useEffect(function(){n(te())},[n]),a.useEffect(function(){i&&N("")},[n,i]),a.useEffect(function(){o&&(L("success"),N(o))},[n,o]),a.useEffect(function(){f&&c!=403&&(L("error"),N(f))},[n,f]),a.useEffect(function(){c!=403&&b!=""&&(C("modal-overlay"),setTimeout(function(){C("")},3e3))},[n,c,b]),a.useEffect(function(){c==200&&setTimeout(function(){window.location.href="/"},5e3)},[c]),a.useEffect(function(){c==403&&S(!0)},[c]);var h=a.useState(""),v=r(h,2),k=v[0],C=v[1],d=a.useState(""),_=r(d,2),A=_[0],L=_[1],D=a.useState(""),U=r(D,2),b=U[0],N=U[1],w=function(){u!=""||localStorage.getItem("email")!=""?n(we(u||localStorage.getItem("email"))):(L("error"),N("An email is required to lock your account."))};return e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"account",children:[e.jsx("span",{className:"lock-account",children:e.jsx("button",{onClick:w,id:"lock_account_btn",children:e.jsx("h3",{children:"LOCK ACCOUNT"})})}),e.jsx("span",{className:k,children:b!=""&&e.jsx(V,{messageType:A,message:b})})]}),j&&e.jsx("div",{className:"modal-overlay",children:e.jsx("main",{className:"login",children:e.jsx(LoginComponent,{})})})]})}function Ie(){var n=q(),t=P(function(m){return m.user});t.userLoading,t.userError,t.userSuccessMessage,t.userErrorMessage,t.userStatusCode;var i=t.username,o=t.firstname,f=t.lastname,c=t.nickname,u=t.nicename,g=t.phone,l=P(function(m){return m.change}),x=l.changeLoading;l.changeError;var p=l.changeSuccessMessage,j=l.changeErrorMessage,S=l.changeStatusCode,h=P(function(m){return m.login}),v=h.loginStatusCode,k=a.useState(i),C=r(k,2),d=C[0],_=C[1],A=a.useState(o),L=r(A,2),D=L[0],U=L[1],b=a.useState(f),N=r(b,2),w=N[0],M=N[1],F=a.useState(c),I=r(F,2),T=I[0],B=I[1],G=a.useState(u),O=r(G,2),E=O[0],y=O[1],ne=a.useState(g),$=r(ne,2),R=$[0],z=$[1],re=a.useState(""),H=r(re,2),oe=H[0],J=H[1],ce=a.useState(""),Q=r(ce,2),ie=Q[0],W=Q[1],ue=a.useState(""),X=r(ue,2),Z=X[0],K=X[1],le=a.useState(!1),ee=r(le,2),he=ee[0],ae=ee[1];a.useEffect(function(){n(te())},[n]),a.useEffect(function(){i&&_(i),o&&U(o),f&&M(f),c&&B(c),u&&y(u),g&&z(g)},[i,o,f,c,u,g]),a.useEffect(function(){x&&K("")},[x]),a.useEffect(function(){p&&(W("success"),K(p))},[p]),a.useEffect(function(){j&&(W("error"),K(j))},[j]),a.useEffect(function(){S&&(J("modal-overlay"),setTimeout(function(){J("")},3e3))},[S]),a.useEffect(function(){S==403&&ae(!0)},[S]),a.useEffect(function(){v==200&&ae(!1)},[v]);var de=function(s){s.preventDefault(),s.target.name=="username"&&_(s.target.value)},me=function(s){s.preventDefault(),se(d)&&n(Ee(d))},fe=function(s){s.preventDefault(),s.target.name=="nicename"&&y(s.target.value)},ge=function(s){s.preventDefault(),se(E)&&n(ye(E))},pe=function(s){s.preventDefault(),s.target.name=="phone"&&z(s.target.value)},Se=function(s){s.preventDefault(),ke(R)&&n(Le(R))},ve=function(s){s.preventDefault(),s.target.name=="nickname"&&B(s.target.value)},xe=function(s){s.preventDefault(),Y(T)&&n(be(T))},je=function(s){s.preventDefault(),s.target.name=="firstname"&&U(s.target.value)},_e=function(s){s.preventDefault(),s.target.name=="lastname"&&M(s.target.value)},Ce=function(s){if(s.preventDefault(),Y(D)&&Y(w)){var Ne={first_name:D,last_name:w};n(Me(Ne))}};return e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"change",children:[e.jsxs("span",{className:"change-username",children:[e.jsx("input",{className:"input-username",type:"text",name:"username",placeholder:"Username",value:d,onChange:de}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:me,id:"change_username_btn",children:e.jsx("h3",{children:"Change Username"})})})]}),e.jsxs("span",{className:"change-name",children:[e.jsx("input",{className:"input-name",type:"text",name:"firstname",placeholder:"First Name",value:D,onChange:je}),e.jsx("input",{className:"input-name",type:"text",name:"lastname",placeholder:"Last Name",value:w,onChange:_e}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:Ce,id:"change_name_btn",children:e.jsx("h3",{children:"Change Name"})})})]}),e.jsxs("span",{className:"change-nickname",children:[e.jsx("input",{className:"input-name",type:"text",name:"nickname",placeholder:"Nickname",value:T,onChange:ve}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:xe,id:"change_nickname_btn",children:e.jsx("h3",{children:"Change Nickname"})})})]}),e.jsxs("span",{className:"change-nicename",children:[e.jsx("input",{className:"input-name",type:"text",name:"nicename",placeholder:"Nicename",value:E,onChange:fe}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:ge,id:"change_nicename_btn",children:e.jsx("h3",{children:"Change Nicename"})})})]}),e.jsxs("span",{className:"change-phone",children:[e.jsx("input",{className:"input-phone",type:"text",name:"phone",placeholder:"Phone Number",value:R,onChange:pe}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:Se,id:"change_phone_btn",children:e.jsx("h3",{children:"Change Phone"})})})]}),e.jsx("span",{className:oe,children:Z!=""&&e.jsx(V,{messageType:ie,message:Z})})]}),he&&e.jsx("div",{className:"modal-overlay",children:e.jsx("main",{className:"login",children:e.jsx(Ae,{})})})]})}function Be(){var n=q(),t=P(function(_){return _.logout});t.logoutLoading,t.logoutError;var i=t.logoutSuccessMessage,o=t.logoutErrorMessage;a.useEffect(function(){i&&(j("success"),k(i))},[n,i]),a.useEffect(function(){o&&(j("error"),k(o))},[n,o]),a.useEffect(function(){o&&(j("error"),k(o))},[n,o]),a.useEffect(function(){v!=""&&(g("modal-overlay"),setTimeout(function(){g("")},3e3))},[n,v]);var f=a.useState(""),c=r(f,2),u=c[0],g=c[1],l=a.useState(""),x=r(l,2),p=x[0],j=x[1],S=a.useState(""),h=r(S,2),v=h[0],k=h[1],C=function(){n(Pe()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},d=function(){n(Te()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"auth",children:[e.jsxs("span",{className:"logout",children:[e.jsx("button",{onClick:C,id:"logout_btn",children:e.jsx("h3",{children:"LOG OUT"})}),e.jsx("button",{onClick:d,id:"logout_all_btn",children:e.jsx("h3",{children:"LOG OUT ALL"})})]}),e.jsx("span",{className:u,children:v!=""&&e.jsx(V,{messageType:p,message:v})})]})})}function Oe(){var n=q(),t=P(function(E){return E.password}),i=t.passwordSuccessMessage,o=t.passwordErrorMessage,f=t.passwordStatusCode,c=P(function(E){return E.login}),u=c.loginStatusCode,g=a.useState(!1),l=r(g,2),x=l[0],p=l[1];a.useEffect(function(){u==200&&p(!1)},[u]),a.useEffect(function(){f==403&&p(!0)},[f]);var j=a.useState(""),S=r(j,2),h=S[0],v=S[1],k=a.useState(""),C=r(k,2),d=C[0],_=C[1],A=a.useState(!1),L=r(A,2),D=L[0];L[1];var U=a.useState("Enter your preferred password twice."),b=r(U,2),N=b[0],w=b[1],M=a.useState(""),F=r(M,2),I=F[0],T=F[1];a.useEffect(function(){h!=""&&d!=""&&h===d&&(w("You have entered your password twice."),T("success"))},[h,d]),a.useEffect(function(){h!=""&&d!=""&&h!=d&&(w("Passwords do not match."),T("error"))},[h,d]),a.useEffect(function(){i&&(w(i),T("success"))},[i]),a.useEffect(function(){o&&(w(o),T("error"))},[o]);var B=function(y){y.target.name=="password"&&v(y.target.value)},G=function(y){y.target.name=="confirmPassword"&&_(y.target.value)},O=function(y){y.preventDefault(),De(h)&&h===d&&n(Ue({password:h,confirmPassword:d}))};return e.jsxs(e.Fragment,{children:[e.jsx("main",{children:e.jsx("form",{action:"",children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",onChange:B,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"confirm-password",placeholder:"Confirm Password",onChange:G,required:!0})})})]}),e.jsxs("tfoot",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("button",{type:"submit",onClick:O,id:"change_password_btn",children:e.jsx("h3",{children:"CONFIRM"})})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("span",{className:D,children:N!=""&&e.jsx(V,{messageType:I,message:N})})})})]})]})})}),x&&e.jsx("div",{className:"modal-overlay",children:e.jsx("main",{className:"login",children:e.jsx(LoginComponent,{})})})]})}function Re(){var n=P(function(p){return p.login}),t=n.profileImage,i=n.displayName,o=t||localStorage.getItem("profile_image"),f=i||localStorage.getItem("display_name"),c=a.useState(""),u=r(c,2),g=u[0],l=u[1],x=function(){g==!1&&l(!0),g==!0&&l(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Dashboard"}),e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"profile-image",children:e.jsx("img",{src:"".concat(o),alt:""})}),e.jsx("h2",{className:"display-name",children:f}),e.jsx("div",{className:"action options",children:e.jsxs("button",{className:"settings-button",onClick:x,id:"settings_btn",children:[e.jsx("i",{class:"fa-solid fa-gears"}),e.jsx("h3",{children:"SETTINGS"})]})})]}),g&&e.jsx(Ie,{}),e.jsx(Oe,{}),e.jsx(Be,{}),e.jsx(Fe,{})]})}export{Re as default};
//# sourceMappingURL=Dashboard.js.map
