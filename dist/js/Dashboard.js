import{V as y,W as P,a1 as E,n as D,o as h,a2 as U,Z as N,$ as L,J as d,K as f,s as b,j as s,a3 as M,U as B,a4 as G}from"./index.js";import{u as K}from"./useDispatch.js";var p={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},J=p.VITE_BACKEND_URL?p.VITE_BACKEND_URL+"/unlock-account":"/wp-json/seven-tech/v1/users/unlock-account",x=p.VITE_BACKEND_URL?p.VITE_BACKEND_URL+"/remove-account":"/wp-json/seven-tech/v1/users/remove-account",z={accountLoading:!1,accountError:"",accountSuccessMessage:"",accountErrorMessage:""},w=y("account/unlockAccount",function(){var u=D(h().mark(function o(r){var a,c,t,i,l;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.username,c=r.password,t=r.confirmationCode,e.prev=1,L(a)!=!1){e.next=4;break}throw new Error("Username is not valid.");case 4:if(N(c)!=!1){e.next=6;break}throw new Error("Password is not valid.");case 6:if(U(t)!=!1){e.next=8;break}throw new Error("Confirmation Code is not valid.");case 8:return e.next=10,fetch("".concat(J),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:c,confirmationCode:t})});case 10:return i=e.sent,e.next=13,i.json();case 13:return l=e.sent,e.abrupt("return",l);case 17:throw e.prev=17,e.t0=e.catch(1),console.error(e.t0),e.t0;case 21:case"end":return e.stop()}},o,null,[[1,17]])}));return function(o){return u.apply(this,arguments)}}()),S=y("account/removeAccount",function(){var u=D(h().mark(function o(r){var a,c,t,i,l;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.username,c=r.password,t=r.confirmationCode,e.prev=1,L(a)!=!1){e.next=4;break}throw new Error("Username is not valid.");case 4:if(N(c)!=!1){e.next=6;break}throw new Error("Password is not valid.");case 6:if(U(t)!=!1){e.next=8;break}throw new Error("Confirmation Code is not valid.");case 8:return e.next=10,fetch("".concat(x),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:c,confirmationCode:t})});case 10:return i=e.sent,e.next=13,i.json();case 13:return l=e.sent,e.abrupt("return",l);case 17:throw e.prev=17,e.t0=e.catch(1),console.error(e.t0),e.t0;case 21:case"end":return e.stop()}},o,null,[[1,17]])}));return function(o){return u.apply(this,arguments)}}());P({name:"account",initialState:z,reducers:{},extraReducers:function(o){o.addMatcher(E(w.fulfilled,S.fulfilled),function(r,a){r.accountLoading=!1,r.accountError="",r.accountSuccessMessage=a.payload.successMessage,r.accountErrorMessage=a.payload.errorMessage}).addMatcher(E(w.pending,S.pending),function(r){r.accountLoading=!0,r.accountError=null,r.accountSuccessMessage=null,r.accountErrorMessage=null}).addMatcher(E(w.rejected,S.rejected),function(r,a){r.accountLoading=!1,r.accountError=a.error,r.accountErrorMessage=a.error})}});function W(){var u=K(),o=d(function(n){return n.login}),r=o.profileImage,a=o.displayName,c=r||localStorage.getItem("profile_image"),t=a||localStorage.getItem("display_name"),i=d(function(n){return n.change});i.changeName,i.changePhone,i.changeUsername;var l=d(function(n){return n.email});l.removeEmail;var m=d(function(n){return n.password});m.changePassword;var e=d(function(n){return n.logout}),g=e.logoutSuccessMessage,v=e.logoutErrorMessage,k=f.useState(""),T=b(k,2),R=T[0],A=T[1],V=f.useState(""),j=b(V,2),C=j[0],I=j[1];f.useEffect(function(){g&&(A("success"),I(g))},[g]),f.useEffect(function(){v&&(A("error"),I(v))},[v]);var _=function(){u(B()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},O=function(){M!=null&&u(G()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})};return s.jsxs("section",{className:"dashboard",children:[s.jsx("h2",{className:"title",children:"Dashboard"}),s.jsxs("div",{children:[s.jsx("div",{children:s.jsx("img",{src:"".concat(c),alt:""})}),s.jsx("span",{children:t})]}),s.jsx("div",{}),s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("button",{onClick:_,children:s.jsx("h3",{children:"LOG OUT"})}),M!=null&&s.jsx("button",{onClick:O,children:s.jsx("h3",{children:"LOG OUT ALL"})})]}),C!==""&&s.jsx("div",{className:"status-bar card ".concat(R),children:s.jsx("span",{children:C})})]})]})}export{W as default};
//# sourceMappingURL=Dashboard.js.map
