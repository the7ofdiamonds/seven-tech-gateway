import{u as l,r as s,_ as i,j as e,k as se,m as Ue,n as Fe,o as Ie,p as Oe,q as Re,h as qe,s as Be,l as Ge,t as Ve,v as ze}from"./index.js";import{S as He,L as Je}from"./LoginComponent.js";import{u as te}from"./useDispatch.js";import"./NavigationLoginComponent.js";function Ke(){var t=te(),d=l(function(n){return n.change}),_=d.changeLoading;d.changeError;var p=d.changeSuccessMessage,N=d.changeErrorMessage,E=d.changeStatusCode,f=l(function(n){return n.email}),L=f.emailLoading;f.emailError;var P=f.emailSuccessMessage,v=f.emailErrorMessage,M=f.emailStatusCode,g=l(function(n){return n.password}),T=g.passwordLoading;g.passwordError;var y=g.passwordSuccessMessage,C=g.passwordErrorMessage,b=g.passwordStatusCode,m=l(function(n){return n.logout});m.logoutLoading,m.logoutError;var S=m.logoutSuccessMessage,h=m.logoutErrorMessage,c=l(function(n){return n.account}),k=c.accountLoading;c.accountError;var D=c.accountSuccessMessage,x=c.accountErrorMessage,j=c.accountStatusCode,w=c.email,A=c.username,O=c.firstname,r=c.lastname,ne=c.phone,re=s.useState(O),z=i(re,2),R=z[0],oe=z[1],ce=s.useState(r),H=i(ce,2),q=H[0],ue=H[1],ie=s.useState(A),J=i(ie,2),B=J[0],le=J[1],he=s.useState(""),K=i(he,2),U=K[0],de=K[1],ge=s.useState(""),Q=i(ge,2),F=Q[0],fe=Q[1],me=s.useState(ne),W=i(me,2),G=W[0],Se=W[1],pe=s.useState(""),X=i(pe,2);X[0],X[1];var ve=s.useState(""),Y=i(ve,2),Ce=Y[0],Z=Y[1],xe=s.useState(""),$=i(xe,2),je=$[0],u=$[1],we=s.useState(""),ee=i(we,2),I=ee[0],o=ee[1];s.useEffect(function(){(k||_||L||T)&&o("")},[t,k,_,L,T]),s.useEffect(function(){S&&(u("success"),o(S))},[t,S]),s.useEffect(function(){p&&(u("success"),o(p))},[t,p]),s.useEffect(function(){P&&(u("success"),o(P))},[t,P]),s.useEffect(function(){y&&(u("success"),o(y))},[t,y]),s.useEffect(function(){D&&(u("success"),o(D))},[t,D]),s.useEffect(function(){h&&(u("error"),o(h))},[t,h]),s.useEffect(function(){h&&(u("error"),o(h))},[t,h]),s.useEffect(function(){N&&E!=403&&(u("error"),o(N))},[t,N]),s.useEffect(function(){v&&M!=403&&(u("error"),o(v))},[t,v]),s.useEffect(function(){C&&b!=403&&(u("error"),o(C))},[t,C]),s.useEffect(function(){x&&j!=403&&(u("error"),o(x))},[t,x]),s.useEffect(function(){(E!=403||M!=403||b!=403||j!=403)&&I!=""&&(Z("modal-overlay"),setTimeout(function(){Z("")},3e3))},[t,E,M,b,j,I]);var _e=function(a){a.preventDefault(),a.target.name=="firstname"&&oe(a.target.value)},Ne=function(a){a.preventDefault(),a.target.name=="lastname"&&ue(a.target.value)},Ee=function(a){a.preventDefault(),(R!==""||q!=="")&&t(Ue({firstName:R,lastName:q})).then(function(V){V.payload.statusCode==201&&(t(Fe(V.payload.firstname)),t(Ie(V.payload.lastname)))})},Le=function(a){a.preventDefault(),a.target.name=="username"&&le(a.target.value)},Pe=function(a){a.preventDefault(),B!=""&&t(Oe(B))},ae=function(a){a.preventDefault(),a.target.name=="password"&&de(a.target.value),a.target.name=="confirmPassword"&&fe(a.target.value)},Me=function(a){a.preventDefault(),U==F&&U!=""&&F!=""&&t(Re({password:U,confirmPassword:F}))},ye=function(a){a.preventDefault(),w!=""||localStorage.getItem("email")!=""?t(qe(w||localStorage.getItem("email"))):(u("error"),o("An email is required to reset password."))},be=function(a){a.preventDefault(),a.target.name=="phone"&&Se(a.target.value)},ke=function(a){a.preventDefault(),G!=""&&t(Be(G))},De=function(){t(Ge()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Te=function(){se!=null&&t(Ve()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Ae=function(){t(ze())};return e.jsx(e.Fragment,{children:e.jsxs("table",{className:"settings",children:[e.jsx("thead",{children:e.jsx("th",{children:e.jsx("h2",{children:"Settings"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{children:e.jsx("form",{action:"",children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"change-name",children:[e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:R,onChange:_e}),e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:q,onChange:Ne}),e.jsx("button",{onClick:Ee,children:e.jsx("h3",{children:"Change Name"})})]}),e.jsx("tr",{}),e.jsxs("tr",{className:"change-username",children:[e.jsx("input",{type:"text",name:"username",placeholder:"Username",value:B,onChange:Le}),e.jsx("button",{onClick:Pe,children:e.jsx("h3",{children:"Change Username"})})]}),e.jsxs("tr",{className:"change-phone",children:[e.jsx("input",{type:"text",name:"phone",placeholder:"Phone Number",value:G,onChange:be}),e.jsx("button",{onClick:ke,children:e.jsx("h3",{children:"Change Phone"})})]}),e.jsxs("tr",{className:"change-password",children:[e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:U,onChange:ae}),e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:F,onChange:ae}),e.jsx("button",{onClick:Me,children:e.jsx("h3",{children:"Change Password"})})]})]})]})})})})}),e.jsxs("tfoot",{children:[e.jsx("tr",{className:"forgot-password",children:e.jsx("button",{onClick:ye,children:e.jsx("h3",{children:"Forgot Password"})})}),e.jsxs("tr",{className:"logout",children:[e.jsx("button",{onClick:De,children:e.jsx("h3",{children:"LOG OUT"})}),se!=null&&e.jsx("button",{onClick:Te,children:e.jsx("h3",{children:"LOG OUT ALL"})})]}),e.jsx("tr",{className:"remove-account",children:e.jsx("button",{onClick:Ae,children:e.jsx("h3",{children:"REMOVE ACCOUNT"})})}),e.jsx("span",{className:Ce,children:I!==""&&e.jsx(He,{messageType:je,message:I})})]})]})})}function Ze(){var t=te(),d=l(function(r){return r.login}),_=d.profileImage,p=d.displayName,N=_||localStorage.getItem("profile_image"),E=p||localStorage.getItem("display_name"),f=l(function(r){return r.change}),L=f.changeStatusCode,P=l(function(r){return r.email}),v=P.emailStatusCode,M=l(function(r){return r.password}),g=M.passwordStatusCode,T=l(function(r){return r.login});T.loginStatusCode;var y=l(function(r){return r.account}),C=y.accountStatusCode,b=s.useState(""),m=i(b,2),S=m[0],h=m[1],c=s.useState(!1),k=i(c,2),D=k[0],x=k[1],j=l(function(r){return r.login}),w=j.accessToken,A=j.refreshToken;s.useEffect(function(){w&&A&&x(!1)},[w,A]),s.useEffect(function(){(L==403||v==403||g==403||C==403)&&x(!0)},[t,L,v,g,C]);var O=function(){S==!1&&h(!0),S==!0&&h(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Dashboard"}),e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"profile-image",children:e.jsx("img",{src:"".concat(N),alt:""})}),e.jsx("h2",{className:"display-name",children:E}),e.jsx("div",{className:"options",children:e.jsx("button",{className:"settings-button",onClick:O,children:e.jsx("i",{class:"fa-solid fa-gears"})})})]}),S&&e.jsx(Ke,{}),D&&e.jsx("div",{className:"modal-overlay",children:e.jsx(Je,{})})]})}export{Ze as default};
//# sourceMappingURL=Dashboard.js.map
