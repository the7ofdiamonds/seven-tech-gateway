import{u as l,r as t,g as ga,f as pa,_ as o,j as e,h as Ee,i as va,k as Sa,m as Na,n as xa,o as Ca,p as ja,q as _a,t as wa,l as Ea,v as ya,w as ka}from"./index.js";import La from"./Login.js";import{u as ye,S as Ra}from"./StatusBarComponent.js";import"./NavigationLoginComponent.js";function Aa(){var n=ye(),h=l(function(s){return s.password}),w=h.passwordLoading;h.passwordError;var N=h.passwordSuccessMessage,E=h.passwordErrorMessage,y=h.passwordStatusCode,c=l(function(s){return s.user}),k=c.userLoading;c.userError;var L=c.userSuccessMessage,x=c.userErrorMessage,R=c.userStatusCode,g=c.username,A=c.firstname,p=c.lastname,v=c.nickname,f=c.nicename,M=c.roles,S=c.phone,d=l(function(s){return s.email}),D=d.emailLoading;d.emailError;var P=d.emailSuccessMessage,C=d.emailErrorMessage,b=d.emailStatusCode,m=l(function(s){return s.role});m.roleLoading,m.roleError,m.roleSuccessMessage,m.roleErrorMessage,m.roleStatusCode;var U=m.availableRoles,r=l(function(s){return s.logout});r.logoutLoading,r.logoutError;var q=r.logoutSuccessMessage,j=r.logoutErrorMessage,_=l(function(s){return s.account}),Y=_.accountLoading;_.accountError;var G=_.accountSuccessMessage,K=_.accountErrorMessage,z=_.accountStatusCode,T=_.email;t.useEffect(function(){n(ga(T))},[]),t.useEffect(function(){g&&ae(g),A&&te(A),p&&re(p),v&&ue(v),f&&de(f),S&&Ne(S)},[g,I,p,v,f,S]),t.useEffect(function(){n(pa())},[]),t.useEffect(function(){(Y||k||D||w)&&u("")},[n,Y,k,D,w]),t.useEffect(function(){q&&(i("success"),u(q))},[n,q]),t.useEffect(function(){L&&(i("success"),u(L))},[n,L]),t.useEffect(function(){P&&(i("success"),u(P))},[n,P]),t.useEffect(function(){N&&(i("success"),u(N))},[n,N]),t.useEffect(function(){G&&(i("success"),u(G))},[n,G]),t.useEffect(function(){j&&(i("error"),u(j))},[n,j]),t.useEffect(function(){j&&(i("error"),u(j))},[n,j]),t.useEffect(function(){x&&R!=403&&(i("error"),u(x))},[n,x]),t.useEffect(function(){C&&b!=403&&(i("error"),u(C))},[n,C]),t.useEffect(function(){E&&y!=403&&(i("error"),u(E))},[n,E]),t.useEffect(function(){K&&z!=403&&(i("error"),u(K))},[n,K]),t.useEffect(function(){(R!=403||b!=403||y!=403||z!=403)&&B!=""&&(Ce("modal-overlay"),setTimeout(function(){Ce("")},3e3))},[n,R,b,y,z,B]);var ke=t.useState(""),Z=o(ke,2),O=Z[0],Le=Z[1],Re=t.useState(""),$=o(Re,2),F=$[0],Ae=$[1],Me=t.useState(g),ee=o(Me,2),H=ee[0],ae=ee[1],De=t.useState(A),se=o(De,2),I=se[0],te=se[1],Pe=t.useState(p),ne=o(Pe,2),J=ne[0],re=ne[1],be=t.useState(v),oe=o(be,2),ce=oe[0],ue=oe[1],Ue=t.useState(f),ie=o(Ue,2),le=ie[0],de=ie[1],Te=t.useState(""),me=o(Te,2),Q=me[0],Oe=me[1],Fe=t.useState(""),he=o(Fe,2),fe=he[0],Ie=he[1],Be=t.useState(""),ge=o(Be,2),V=ge[0],qe=ge[1],Ge=t.useState(""),pe=o(Ge,2),ve=pe[0],Ke=pe[1],ze=t.useState(S),Se=o(ze,2),W=Se[0],Ne=Se[1],He=t.useState(""),xe=o(He,2),Je=xe[0],Ce=xe[1],Qe=t.useState(""),je=o(Qe,2),Ve=je[0],i=je[1],We=t.useState(""),_e=o(We,2),B=_e[0],u=_e[1],we=function(a){a.preventDefault(),a.target.name=="password"&&Le(a.target.value),a.target.name=="confirmPassword"&&Ae(a.target.value)},Xe=function(a){a.preventDefault(),O==F&&O!=""&&F!=""&&n(va({password:O,confirmPassword:F}))},Ye=function(a){a.preventDefault(),a.target.name=="username"&&ae(a.target.value)},Ze=function(a){a.preventDefault(),H!=""&&n(Sa(H))},$e=function(a){a.preventDefault(),a.target.name=="firstname"&&te(a.target.value)},ea=function(a){a.preventDefault(),a.target.name=="lastname"&&re(a.target.value)},aa=function(a){a.preventDefault(),(I!==""||J!=="")&&n(Na({firstName:I,lastName:J})).then(function(X){X.payload.statusCode==201&&(n(updateAccountFirstName(X.payload.firstname)),n(updateAccountLastName(X.payload.lastname)))})},sa=function(a){a.preventDefault(),a.target.name=="nickname"&&ue(a.target.value)},ta=function(a){a.preventDefault(),ce!=""&&n(xa(ce))},na=function(a){a.preventDefault(),a.target.name=="nicename"&&de(a.target.value)},ra=function(a){a.preventDefault(),le!=""&&n(Ca(le))},oa=function(a){Oe(a.target.value),Ie(a.target.selectedOptions[0].text)},ca=function(a){a.preventDefault(),Q!=""&&fe!=""&&n(ja({name:Q,display_name:fe}))},ua=function(a){qe(a.target.value),Ke(a.target.selectedOptions[0].text)},ia=function(a){a.preventDefault(),V!=""&&ve!=""&&n(_a({name:V,display_name:ve}))},la=function(a){a.preventDefault(),a.target.name=="phone"&&Ne(a.target.value)},da=function(a){a.preventDefault(),W!=""&&n(wa(W))},ma=function(){n(Ea()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},ha=function(){Ee!=null&&n(ya()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},fa=function(){T!=""||localStorage.getItem("email")!=""?n(ka(T||localStorage.getItem("email"))):(i("error"),u("An email is required to lock your account."))};return console.log(M),e.jsx(e.Fragment,{children:e.jsxs("main",{className:"settings",children:[e.jsx("h2",{children:"Settings"}),e.jsxs("span",{className:"change-password",children:[e.jsx("input",{className:"input-password",type:"password",name:"password",placeholder:"Password",value:O,onChange:we}),e.jsx("input",{className:"input-password",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:F,onChange:we}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:Xe,children:e.jsx("h3",{children:"Change Password"})})})]}),e.jsxs("span",{className:"change-username",children:[e.jsx("input",{className:"input-username",type:"text",name:"username",placeholder:"Username",value:H,onChange:Ye}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:Ze,children:e.jsx("h3",{children:"Change Username"})})})]}),e.jsxs("span",{className:"change-name",children:[e.jsx("input",{className:"input-name",type:"text",name:"firstname",placeholder:"First Name",value:I,onChange:$e}),e.jsx("input",{className:"input-name",type:"text",name:"lastname",placeholder:"Last Name",value:J,onChange:ea}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:aa,children:e.jsx("h3",{children:"Change Name"})})})]}),e.jsxs("span",{className:"change-nickname",children:[e.jsx("input",{className:"input-name",type:"text",name:"nickname",placeholder:"Nickname",value:v,onChange:sa}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:ta,children:e.jsx("h3",{children:"Change Nickname"})})})]}),e.jsxs("span",{className:"change-nicename",children:[e.jsx("input",{className:"input-name",type:"text",name:"nicename",placeholder:"Nicename",value:f,onChange:na}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:ra,children:e.jsx("h3",{children:"Change Nicename"})})})]}),Array.isArray(U)&&e.jsxs("span",{className:"add-role",children:[e.jsx("select",{name:"add_role",id:"add_role",value:Q,onChange:oa,children:U.map(function(s){return e.jsx("option",{value:s.name,children:s.display_name},s.name)})}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:ca,children:e.jsx("h3",{children:"Add Role"})})})]}),Array.isArray(M)&&e.jsxs("span",{className:"remove-role",children:[e.jsx("select",{name:"remove_role",id:"remove_role",value:V,onChange:ua,children:M.map(function(s){return e.jsx("option",{value:s.name,children:s.display_name},s.name)})}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:ia,children:e.jsx("h3",{children:"Remove Role"})})})]}),e.jsxs("span",{className:"change-phone",children:[e.jsx("input",{className:"input-phone",type:"text",name:"phone",placeholder:"Phone Number",value:W,onChange:la}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:da,children:e.jsx("h3",{children:"Change Phone"})})})]}),e.jsxs("span",{className:"logout",children:[e.jsx("button",{onClick:ma,children:e.jsx("h3",{children:"LOG OUT"})}),Ee!=null&&e.jsx("button",{onClick:ha,children:e.jsx("h3",{children:"LOG OUT ALL"})})]}),e.jsx("span",{className:"lock-account",children:e.jsx("button",{onClick:fa,children:e.jsx("h3",{children:"LOCK ACCOUNT"})})}),e.jsx("span",{className:Je,children:B!=""&&e.jsx(Ra,{messageType:Ve,message:B})})]})})}function Ua(){var n=ye(),h=l(function(r){return r.login}),w=h.profileImage,N=h.displayName,E=w||localStorage.getItem("profile_image"),y=N||localStorage.getItem("display_name"),c=l(function(r){return r.user}),k=c.changeStatusCode,L=l(function(r){return r.email}),x=L.emailStatusCode,R=l(function(r){return r.password}),g=R.passwordStatusCode,A=l(function(r){return r.login}),p=A.loginStatusCode,v=l(function(r){return r.account}),f=v.accountStatusCode,M=t.useState(""),S=o(M,2),d=S[0],D=S[1],P=t.useState(!1),C=o(P,2),b=C[0],m=C[1];t.useEffect(function(){p==200&&m(!1)},[p]),t.useEffect(function(){(k==403||x==403||g==403||f==403)&&m(!0)},[n,k,x,g,f]);var U=function(){d==!1&&D(!0),d==!0&&D(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Dashboard"}),e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"profile-image",children:e.jsx("img",{src:"".concat(E),alt:""})}),e.jsx("h2",{className:"display-name",children:y}),e.jsx("div",{className:"options",children:e.jsx("button",{className:"settings-button",onClick:U,children:e.jsx("i",{class:"fa-solid fa-gears"})})})]}),d&&e.jsx(Aa,{}),b&&e.jsx("div",{className:"modal-overlay",children:e.jsx("main",{className:"login",children:e.jsx(La,{})})})]})}export{Ua as default};
//# sourceMappingURL=Dashboard.js.map
