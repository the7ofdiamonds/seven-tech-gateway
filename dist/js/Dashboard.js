import{u as i,r as s,_ as l,j as e,d as ee,e as Te,f as ke,g as Ie,c as Oe,h as Re,l as Ge,i as qe,k as Be}from"./index.js";import Ve from"./Login.js";import{u as ae,S as We}from"./StatusBarComponent.js";import"./NavigationLoginComponent.js";function ze(){var t=ae(),d=i(function(n){return n.change}),_=d.changeLoading;d.changeError;var S=d.changeSuccessMessage,E=d.changeErrorMessage,P=d.changeStatusCode,m=i(function(n){return n.email}),L=m.emailLoading;m.emailError;var y=m.emailSuccessMessage,p=m.emailErrorMessage,M=m.emailStatusCode,g=i(function(n){return n.password}),D=g.passwordLoading;g.passwordError;var v=g.passwordSuccessMessage,b=g.passwordErrorMessage,C=g.passwordStatusCode,x=i(function(n){return n.logout});x.logoutLoading,x.logoutError;var j=x.logoutSuccessMessage,h=x.logoutErrorMessage,c=i(function(n){return n.account}),U=c.accountLoading;c.accountError;var w=c.accountSuccessMessage,A=c.accountErrorMessage,N=c.accountStatusCode,f=c.email,r=c.username,se=c.firstname,te=c.lastname,ne=c.phone,re=s.useState(se),B=l(re,2),I=B[0],oe=B[1],ce=s.useState(te),V=l(ce,2),O=V[0],ue=V[1],le=s.useState(r),W=l(le,2),R=W[0],ie=W[1],he=s.useState(""),z=l(he,2),F=z[0],de=z[1],ge=s.useState(""),H=l(ge,2),T=H[0],fe=H[1],me=s.useState(ne),J=l(me,2),G=J[0],Se=J[1],pe=s.useState(""),K=l(pe,2);K[0],K[1];var ve=s.useState(""),Q=l(ve,2),Ce=Q[0],X=Q[1],xe=s.useState(""),Y=l(xe,2),je=Y[0],u=Y[1],we=s.useState(""),Z=l(we,2),k=Z[0],o=Z[1];s.useEffect(function(){(U||_||L||D)&&o("")},[t,U,_,L,D]),s.useEffect(function(){j&&(u("success"),o(j))},[t,j]),s.useEffect(function(){S&&(u("success"),o(S))},[t,S]),s.useEffect(function(){y&&(u("success"),o(y))},[t,y]),s.useEffect(function(){v&&(u("success"),o(v))},[t,v]),s.useEffect(function(){w&&(u("success"),o(w))},[t,w]),s.useEffect(function(){h&&(u("error"),o(h))},[t,h]),s.useEffect(function(){h&&(u("error"),o(h))},[t,h]),s.useEffect(function(){E&&P!=403&&(u("error"),o(E))},[t,E]),s.useEffect(function(){p&&M!=403&&(u("error"),o(p))},[t,p]),s.useEffect(function(){b&&C!=403&&(u("error"),o(b))},[t,b]),s.useEffect(function(){A&&N!=403&&(u("error"),o(A))},[t,A]),s.useEffect(function(){(P!=403||M!=403||C!=403||N!=403)&&k!=""&&(X("modal-overlay"),setTimeout(function(){X("")},3e3))},[t,P,M,C,N,k]);var Ne=function(a){a.preventDefault(),a.target.name=="firstname"&&oe(a.target.value)},_e=function(a){a.preventDefault(),a.target.name=="lastname"&&ue(a.target.value)},Ee=function(a){a.preventDefault(),(I!==""||O!=="")&&t(Te({firstName:I,lastName:O})).then(function(q){q.payload.statusCode==201&&(t(updateAccountFirstName(q.payload.firstname)),t(updateAccountLastName(q.payload.lastname)))})},Pe=function(a){a.preventDefault(),a.target.name=="username"&&ie(a.target.value)},Le=function(a){a.preventDefault(),R!=""&&t(ke(R))},$=function(a){a.preventDefault(),a.target.name=="password"&&de(a.target.value),a.target.name=="confirmPassword"&&fe(a.target.value)},ye=function(a){a.preventDefault(),F==T&&F!=""&&T!=""&&t(Ie({password:F,confirmPassword:T}))},Me=function(a){a.preventDefault(),f!=""||localStorage.getItem("email")!=""?t(Oe(f||localStorage.getItem("email"))):(u("error"),o("An email is required to reset password."))},be=function(a){a.preventDefault(),a.target.name=="phone"&&Se(a.target.value)},Ae=function(a){a.preventDefault(),G!=""&&t(Re(G))},De=function(){t(Ge()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Ue=function(){ee!=null&&t(qe()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Fe=function(){f!=""||localStorage.getItem("email")!=""?t(Be(f||localStorage.getItem("email"))):(u("error"),o("An email is required to remove your account."))};return e.jsx(e.Fragment,{children:e.jsxs("table",{className:"settings",children:[e.jsx("thead",{children:e.jsx("th",{children:e.jsx("h2",{children:"Settings"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{children:e.jsx("form",{action:"",children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"change-name",children:[e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:I,onChange:Ne}),e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:O,onChange:_e}),e.jsx("button",{onClick:Ee,children:e.jsx("h3",{children:"Change Name"})})]}),e.jsx("tr",{}),e.jsxs("tr",{className:"change-username",children:[e.jsx("input",{type:"text",name:"username",placeholder:"Username",value:R,onChange:Pe}),e.jsx("button",{onClick:Le,children:e.jsx("h3",{children:"Change Username"})})]}),e.jsxs("tr",{className:"change-phone",children:[e.jsx("input",{type:"text",name:"phone",placeholder:"Phone Number",value:G,onChange:be}),e.jsx("button",{onClick:Ae,children:e.jsx("h3",{children:"Change Phone"})})]}),e.jsxs("tr",{className:"change-password",children:[e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:F,onChange:$}),e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:T,onChange:$}),e.jsx("button",{onClick:ye,children:e.jsx("h3",{children:"Change Password"})})]})]})]})})})})}),e.jsxs("tfoot",{children:[e.jsx("tr",{className:"forgot-password",children:e.jsx("button",{onClick:Me,children:e.jsx("h3",{children:"FORGOT PASSWORD"})})}),e.jsxs("tr",{className:"logout",children:[e.jsx("button",{onClick:De,children:e.jsx("h3",{children:"LOG OUT"})}),ee!=null&&e.jsx("button",{onClick:Ue,children:e.jsx("h3",{children:"LOG OUT ALL"})})]}),e.jsx("tr",{className:"remove-account",children:e.jsx("button",{onClick:Fe,children:e.jsx("h3",{children:"REMOVE ACCOUNT"})})}),e.jsx("span",{className:Ce,children:k!==""&&e.jsx(We,{messageType:je,message:k})})]})]})})}function Xe(){var t=ae(),d=i(function(r){return r.login}),_=d.profileImage,S=d.displayName,E=_||localStorage.getItem("profile_image"),P=S||localStorage.getItem("display_name"),m=i(function(r){return r.change}),L=m.changeStatusCode,y=i(function(r){return r.email}),p=y.emailStatusCode,M=i(function(r){return r.password}),g=M.passwordStatusCode,D=i(function(r){return r.login}),v=D.loginStatusCode,b=i(function(r){return r.account}),C=b.accountStatusCode,x=s.useState(""),j=l(x,2),h=j[0],c=j[1],U=s.useState(!1),w=l(U,2),A=w[0],N=w[1];s.useEffect(function(){v==200&&N(!1)},[v]),s.useEffect(function(){(L==403||p==403||g==403||C==403)&&N(!0)},[t,L,p,g,C]);var f=function(){h==!1&&c(!0),h==!0&&c(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Dashboard"}),e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"profile-image",children:e.jsx("img",{src:"".concat(E),alt:""})}),e.jsx("h2",{className:"display-name",children:P}),e.jsx("div",{className:"options",children:e.jsx("button",{className:"settings-button",onClick:f,children:e.jsx("i",{class:"fa-solid fa-gears"})})})]}),h&&e.jsx(ze,{}),A&&e.jsx("div",{className:"modal-overlay",children:e.jsx("main",{className:"login",children:e.jsx(Ve,{})})})]})}export{Xe as default};
//# sourceMappingURL=Dashboard.js.map
