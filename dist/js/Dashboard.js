import{f as I,g as $e,i as W,c as L,d as E,h as he,k as He,m as We,u as w,r as u,_ as S,j as a,n as de,o as Qe,e as Xe,l as Ye,p as Ze,q as ea}from"./index.js";import aa from"./Login.js";import{u as ge,S as ra}from"./StatusBarComponent.js";import"./NavigationLoginComponent.js";var C={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},sa=C.VITE_BACKEND_URL?C.VITE_BACKEND_URL+"/change-name":"/wp-json/seven-tech/v1/user/change-name",na=C.VITE_BACKEND_URL?C.VITE_BACKEND_URL+"/change-phone":"/wp-json/seven-tech/v1/user/change-phone",ta=C.VITE_BACKEND_URL?C.VITE_BACKEND_URL+"/change-username":"/wp-json/seven-tech/v1/user/change-username",oa=C.VITE_BACKEND_URL?C.VITE_BACKEND_URL+"/change-nicename":"/wp-json/seven-tech/v1/user/change-nicename",ca=C.VITE_BACKEND_URL?C.VITE_BACKEND_URL+"/add-role":"/wp-json/seven-tech/v1/user/roles/add-role",ua=C.VITE_BACKEND_URL?C.VITE_BACKEND_URL+"/remove-role":"/wp-json/seven-tech/v1/user/roles/remove-role",ia={changeLoading:!1,changeError:"",changeSuccessMessage:"",changeErrorMessage:"",changeStatusCode:"",username:"",firstname:"",lastname:"",phone:"",nicename:"",role:""},F=I("change/changeName",function(){var n=L(E().mark(function o(r){var s,l,i,g,e,N;return E().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=r.firstName,l=r.lastName,h.prev=1,i=localStorage.getItem("access_token"),g=localStorage.getItem("refresh_token"),i){h.next=6;break}throw new Error("An access token is required to change your name.");case 6:if(s){h.next=8;break}throw new Error("The first name is blank.");case 8:if(l){h.next=10;break}throw new Error("The last name is blank.");case 10:if(he(s)){h.next=12;break}throw new Error("The first name provided is not valid.");case 12:if(he(l)){h.next=14;break}throw new Error("The last name provided is not valid.");case 14:return h.next=16,fetch(sa,{method:"POST",headers:{Authorization:"Bearer "+i,"Refresh-Token":g,"Content-Type":"application/json"},body:JSON.stringify({email:"jamel.c.lyons@me.com",first_name:s,last_name:l})});case 16:return e=h.sent,h.next=19,e.json();case 19:return N=h.sent,h.abrupt("return",N);case 23:throw h.prev=23,h.t0=h.catch(1),console.error(h.t0),new Error(h.t0.message);case 27:case"end":return h.stop()}},o,null,[[1,23]])}));return function(o){return n.apply(this,arguments)}}()),q=I("change/changePhone",function(){var n=L(E().mark(function o(r){var s,l,i;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=localStorage.getItem("access_token"),s!=""){e.next=4;break}throw Error("An access token is required to change your phone number.");case 4:if(He(r)==!0){e.next=6;break}throw Error("There was an error changing your phone number.");case 6:return e.next=8,fetch("".concat(na),{method:"POST",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},body:JSON.stringify({phone:r})});case 8:return l=e.sent,e.next=11,l.json();case 11:return i=e.sent,e.abrupt("return",i);case 15:throw e.prev=15,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0.message);case 19:case"end":return e.stop()}},o,null,[[0,15]])}));return function(o){return n.apply(this,arguments)}}()),z=I("change/changeUsername",function(){var n=L(E().mark(function o(r){var s,l,i;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=localStorage.getItem("access_token"),s!=""){e.next=4;break}throw Error("An access token is required to change your username.");case 4:if(We(r)==!0){e.next=6;break}throw Error("There was an error changing your username.");case 6:return e.next=8,fetch("".concat(ta),{method:"POST",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},body:JSON.stringify({username:r})});case 8:return l=e.sent,e.next=11,l.json();case 11:return i=e.sent,e.abrupt("return",i);case 15:throw e.prev=15,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0.message);case 19:case"end":return e.stop()}},o,null,[[0,15]])}));return function(o){return n.apply(this,arguments)}}()),Q=I("change/changeUserNicename",function(){var n=L(E().mark(function o(r){var s,l,i;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=localStorage.getItem("access_token"),s!=""){e.next=4;break}throw Error("An access token is required to change your username.");case 4:return e.next=6,fetch("".concat(oa),{method:"POST",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},body:JSON.stringify({nicename:r})});case 6:return l=e.sent,e.next=9,l.json();case 9:return i=e.sent,e.abrupt("return",i);case 13:throw e.prev=13,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0.message);case 17:case"end":return e.stop()}},o,null,[[0,13]])}));return function(o){return n.apply(this,arguments)}}()),X=I("change/addUserRole",function(){var n=L(E().mark(function o(r){var s,l,i,g,e;return E().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.roleName,l=r.roleDisplayName,t.prev=1,i=localStorage.getItem("access_token"),i!=""){t.next=5;break}throw Error("An access token is required to change your role.");case 5:return t.next=7,fetch("".concat(ca),{method:"POST",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},body:JSON.stringify({role_name:s,role_display_name:l})});case 7:return g=t.sent,t.next=10,g.json();case 10:return e=t.sent,t.abrupt("return",e);case 14:throw t.prev=14,t.t0=t.catch(1),console.error(t.t0),new Error(t.t0.message);case 18:case"end":return t.stop()}},o,null,[[1,14]])}));return function(o){return n.apply(this,arguments)}}()),Y=I("change/removeUserRole",function(){var n=L(E().mark(function o(r){var s,l,i,g,e;return E().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.roleName,l=r.roleDisplayName,t.prev=1,i=localStorage.getItem("access_token"),i!=""){t.next=5;break}throw Error("An access token is required to change your role.");case 5:return t.next=7,fetch("".concat(ua),{method:"POST",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},body:JSON.stringify({role_name:s,role_display_name:l})});case 7:return g=t.sent,t.next=10,g.json();case 10:return e=t.sent,t.abrupt("return",e);case 14:throw t.prev=14,t.t0=t.catch(1),console.error(t.t0),new Error(t.t0.message);case 18:case"end":return t.stop()}},o,null,[[1,14]])}));return function(o){return n.apply(this,arguments)}}());$e({name:"change",initialState:ia,reducers:{updateChangeSuccessMessage:function(o,r){o.changeSuccessMessage=r.payload},updateChangeErrorMessage:function(o,r){o.changeError=r.payload,o.changeErrorMessage=r.payload}},extraReducers:function(o){o.addMatcher(W(F.fulfilled,q.fulfilled,z.fulfilled,Q.fulfilled,X.fulfilled,Y.fulfilled),function(r,s){r.changeLoading=!1,r.changeError="",r.changeSuccessMessage=s.payload.successMessage,r.changeErrorMessage=s.payload.errorMessage,r.changeStatusCode=s.payload.statusCode,r.username=s.payload.username,r.firstname=s.payload.firstname,r.lastname=s.payload.lastname,r.phone=s.payload.phone,r.nicename=s.payload.nicename,r.role=s.payload.role}).addMatcher(W(F.pending,q.pending,z.pending,Q.pending,X.pending,Y.pending),function(r){r.changeLoading=!0,r.changeError=null,r.changeSuccessMessage="",r.changeErrorMessage="",r.changeStatusCode=""}).addMatcher(W(F.rejected,q.rejected,z.rejected,Q.rejected,X.rejected,Y.rejected),function(r,s){r.changeLoading=!1,r.changeError=s.error,r.changeErrorMessage=s.error.message,r.changeStatusCode=s.error.code})}});function la(){var n=ge(),o=w(function(d){return d.user}),r=o.changeLoading;o.changeError;var s=o.changeSuccessMessage,l=o.changeErrorMessage,i=o.changeStatusCode,g=w(function(d){return d.email}),e=g.emailLoading;g.emailError;var N=g.emailSuccessMessage,t=g.emailErrorMessage,h=g.emailStatusCode,y=w(function(d){return d.password}),_=y.passwordLoading;y.passwordError;var A=y.passwordSuccessMessage,P=y.passwordErrorMessage,k=y.passwordStatusCode,b=w(function(d){return d.logout});b.logoutLoading,b.logoutError;var U=b.logoutSuccessMessage,j=b.logoutErrorMessage,p=w(function(d){return d.account}),O=p.accountLoading;p.accountError;var D=p.accountSuccessMessage,R=p.accountErrorMessage,M=p.accountStatusCode,T=p.email,m=p.username,me=p.firstname,fe=p.lastname,pe=p.phone,ve=u.useState(me),Z=S(ve,2),G=Z[0],Se=Z[1],Ee=u.useState(fe),ee=S(Ee,2),J=ee[0],Ce=ee[1],we=u.useState(m),ae=S(we,2),x=ae[0],Ne=ae[1],je=u.useState(""),re=S(je,2),B=re[0],ye=re[1],Te=u.useState(""),se=S(Te,2),V=se[0],Ae=se[1],ke=u.useState(pe),ne=S(ke,2),$=ne[0],be=ne[1],Ue=u.useState(""),te=S(Ue,2);te[0],te[1];var De=u.useState(""),oe=S(De,2),Me=oe[0],ce=oe[1],Ie=u.useState(""),ue=S(Ie,2),Le=ue[0],v=ue[1],Pe=u.useState(""),ie=S(Pe,2),K=ie[0],f=ie[1];u.useEffect(function(){(O||r||e||_)&&f("")},[n,O,r,e,_]),u.useEffect(function(){U&&(v("success"),f(U))},[n,U]),u.useEffect(function(){s&&(v("success"),f(s))},[n,s]),u.useEffect(function(){N&&(v("success"),f(N))},[n,N]),u.useEffect(function(){A&&(v("success"),f(A))},[n,A]),u.useEffect(function(){D&&(v("success"),f(D))},[n,D]),u.useEffect(function(){j&&(v("error"),f(j))},[n,j]),u.useEffect(function(){j&&(v("error"),f(j))},[n,j]),u.useEffect(function(){l&&i!=403&&(v("error"),f(l))},[n,l]),u.useEffect(function(){t&&h!=403&&(v("error"),f(t))},[n,t]),u.useEffect(function(){P&&k!=403&&(v("error"),f(P))},[n,P]),u.useEffect(function(){R&&M!=403&&(v("error"),f(R))},[n,R]),u.useEffect(function(){(i!=403||h!=403||k!=403||M!=403)&&K!=""&&(ce("modal-overlay"),setTimeout(function(){ce("")},3e3))},[n,i,h,k,M,K]);var Re=function(c){c.preventDefault(),c.target.name=="firstname"&&Se(c.target.value)},_e=function(c){c.preventDefault(),c.target.name=="lastname"&&Ce(c.target.value)},Oe=function(c){c.preventDefault(),(G!==""||J!=="")&&n(F({firstName:G,lastName:J})).then(function(H){H.payload.statusCode==201&&(n(updateAccountFirstName(H.payload.firstname)),n(updateAccountLastName(H.payload.lastname)))})},Be=function(c){c.preventDefault(),c.target.name=="username"&&Ne(c.target.value)},Ve=function(c){c.preventDefault(),x!=""&&n(z(x))},le=function(c){c.preventDefault(),c.target.name=="password"&&ye(c.target.value),c.target.name=="confirmPassword"&&Ae(c.target.value)},Ke=function(c){c.preventDefault(),B==V&&B!=""&&V!=""&&n(Qe({password:B,confirmPassword:V}))},Fe=function(c){c.preventDefault(),T!=""||localStorage.getItem("email")!=""?n(Xe(T||localStorage.getItem("email"))):(v("error"),f("An email is required to reset password."))},qe=function(c){c.preventDefault(),c.target.name=="phone"&&be(c.target.value)},ze=function(c){c.preventDefault(),$!=""&&n(q($))},Ge=function(){n(Ye()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Je=function(){de!=null&&n(Ze()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},xe=function(){T!=""||localStorage.getItem("email")!=""?n(ea(T||localStorage.getItem("email"))):(v("error"),f("An email is required to remove your account."))};return a.jsx(a.Fragment,{children:a.jsxs("main",{className:"settings",children:[a.jsx("h2",{children:"Settings"}),a.jsxs("span",{className:"change-name",children:[a.jsx("input",{className:"input-name",type:"text",name:"firstname",placeholder:"First Name",value:G,onChange:Re}),a.jsx("input",{className:"input-name",type:"text",name:"lastname",placeholder:"Last Name",value:J,onChange:_e}),a.jsx("div",{className:"action",children:a.jsx("button",{onClick:Oe,children:a.jsx("h3",{children:"Change Name"})})})]}),a.jsxs("span",{className:"change-username",children:[a.jsx("input",{className:"input-username",type:"text",name:"username",placeholder:"Username",value:x,onChange:Be}),a.jsx("div",{className:"action",children:a.jsx("button",{onClick:Ve,children:a.jsx("h3",{children:"Change Username"})})})]}),a.jsxs("span",{className:"change-phone",children:[a.jsx("input",{className:"input-phone",type:"text",name:"phone",placeholder:"Phone Number",value:$,onChange:qe}),a.jsx("div",{className:"action",children:a.jsx("button",{onClick:ze,children:a.jsx("h3",{children:"Change Phone"})})})]}),a.jsxs("span",{className:"change-password",children:[a.jsx("input",{className:"input-password",type:"password",name:"password",placeholder:"Password",value:B,onChange:le}),a.jsx("input",{className:"input-password",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:V,onChange:le}),a.jsx("div",{className:"action",children:a.jsx("button",{onClick:Ke,children:a.jsx("h3",{children:"Change Password"})})})]}),a.jsx("span",{className:"forgot-password",children:a.jsx("button",{onClick:Fe,children:a.jsx("h3",{children:"FORGOT PASSWORD"})})}),a.jsxs("span",{className:"logout",children:[a.jsx("button",{onClick:Ge,children:a.jsx("h3",{children:"LOG OUT"})}),de!=null&&a.jsx("button",{onClick:Je,children:a.jsx("h3",{children:"LOG OUT ALL"})})]}),a.jsx("span",{className:"remove-account",children:a.jsx("button",{onClick:xe,children:a.jsx("h3",{children:"REMOVE ACCOUNT"})})}),a.jsx("span",{className:Me,children:K!=""&&a.jsx(ra,{messageType:Le,message:K})})]})})}function fa(){var n=ge(),o=w(function(m){return m.login}),r=o.profileImage,s=o.displayName,l=r||localStorage.getItem("profile_image"),i=s||localStorage.getItem("display_name"),g=w(function(m){return m.user}),e=g.changeStatusCode,N=w(function(m){return m.email}),t=N.emailStatusCode,h=w(function(m){return m.password}),y=h.passwordStatusCode,_=w(function(m){return m.login}),A=_.loginStatusCode,P=w(function(m){return m.account}),k=P.accountStatusCode,b=u.useState(""),U=S(b,2),j=U[0],p=U[1],O=u.useState(!1),D=S(O,2),R=D[0],M=D[1];u.useEffect(function(){A==200&&M(!1)},[A]),u.useEffect(function(){(e==403||t==403||y==403||k==403)&&M(!0)},[n,e,t,y,k]);var T=function(){j==!1&&p(!0),j==!0&&p(!1)};return a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"title",children:"Dashboard"}),a.jsxs("div",{className:"header",children:[a.jsx("div",{className:"profile-image",children:a.jsx("img",{src:"".concat(l),alt:""})}),a.jsx("h2",{className:"display-name",children:i}),a.jsx("div",{className:"options",children:a.jsx("button",{className:"settings-button",onClick:T,children:a.jsx("i",{class:"fa-solid fa-gears"})})})]}),j&&a.jsx(la,{}),R&&a.jsx("div",{className:"modal-overlay",children:a.jsx("main",{className:"login",children:a.jsx(aa,{})})})]})}export{fa as default};
//# sourceMappingURL=Dashboard.js.map
