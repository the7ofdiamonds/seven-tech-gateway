import{c as D,a as re,k as S,b as L,d as f,m as O,f as V,g as _,u as d,r as h,_ as M,j as e,n as R,h as ne,l as se,o as oe}from"./index.js";import"./Login.js";import{u as te}from"./useDispatch.js";import"./NavigationLogin.js";var p={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ce=p.VITE_BACKEND_URL?p.VITE_BACKEND_URL+"/unlock-account":"/wp-json/seven-tech/v1/users/unlock-account",le=p.VITE_BACKEND_URL?p.VITE_BACKEND_URL+"/remove-account":"/wp-json/seven-tech/v1/users/remove-account",ie={accountLoading:!1,accountError:"",accountSuccessMessage:"",accountErrorMessage:""},b=D("account/unlockAccount",function(){var o=L(f().mark(function t(r){var s,c,l,i,u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=r.username,c=r.password,l=r.confirmationCode,a.prev=1,_(s)!=!1){a.next=4;break}throw new Error("Username is not valid.");case 4:if(V(c)!=!1){a.next=6;break}throw new Error("Password is not valid.");case 6:if(O(l)!=!1){a.next=8;break}throw new Error("Confirmation Code is not valid.");case 8:return a.next=10,fetch("".concat(ce),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:c,confirmationCode:l})});case 10:return i=a.sent,a.next=13,i.json();case 13:return u=a.sent,a.abrupt("return",u);case 17:throw a.prev=17,a.t0=a.catch(1),console.error(a.t0),a.t0;case 21:case"end":return a.stop()}},t,null,[[1,17]])}));return function(t){return o.apply(this,arguments)}}()),m=D("account/removeAccount",function(){var o=L(f().mark(function t(r){var s,c,l,i,u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=r.username,c=r.password,l=r.confirmationCode,a.prev=1,_(s)!=!1){a.next=4;break}throw new Error("Username is not valid.");case 4:if(V(c)!=!1){a.next=6;break}throw new Error("Password is not valid.");case 6:if(O(l)!=!1){a.next=8;break}throw new Error("Confirmation Code is not valid.");case 8:return a.next=10,fetch("".concat(le),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:c,confirmationCode:l})});case 10:return i=a.sent,a.next=13,i.json();case 13:return u=a.sent,a.abrupt("return",u);case 17:throw a.prev=17,a.t0=a.catch(1),console.error(a.t0),a.t0;case 21:case"end":return a.stop()}},t,null,[[1,17]])}));return function(t){return o.apply(this,arguments)}}());re({name:"account",initialState:ie,reducers:{},extraReducers:function(t){t.addMatcher(S(b.fulfilled,m.fulfilled),function(r,s){r.accountLoading=!1,r.accountError="",r.accountSuccessMessage=s.payload.successMessage,r.accountErrorMessage=s.payload.errorMessage}).addMatcher(S(b.pending,m.pending),function(r){r.accountLoading=!0,r.accountError=null,r.accountSuccessMessage=null,r.accountErrorMessage=null}).addMatcher(S(b.rejected,m.rejected),function(r,s){r.accountLoading=!1,r.accountError=s.error,r.accountErrorMessage=s.error})}});function fe(){var o=te(),t=d(function(n){return n.login}),r=t.profileImage,s=t.displayName,c=r||localStorage.getItem("profile_image"),l=s||localStorage.getItem("display_name"),i=d(function(n){return n.change}),u=i.changeName,g=i.changePhone,a=i.changeUsername,B=d(function(n){return n.email}),G=B.removeEmail,F=d(function(n){return n.password}),K=F.changePassword,A=d(function(n){return n.logout}),v=A.logoutSuccessMessage,j=A.logoutErrorMessage,J=h.useState(""),N=M(J,2),z=N[0],E=N[1],H=h.useState(""),T=M(H,2),y=T[0],w=T[1];h.useEffect(function(){v&&(E("success"),w(v))},[v]),h.useEffect(function(){j&&(E("error"),w(j))},[j]);var C=function(){o(u())},$="Jamel",q="Lyons",P=function(){o(a())},Q="TestUser",x=function(){o(K())},W=function(ae){ae.preventDefault(),localStorage.getItem("email")!=""?o(ne(k)):(E("error"),w("An email is required to reset password."))},I=function(){o(g())},X=7186172583,U=function(){o(G())},k="jamel.c.lyons@gmail.com",Y=function(){o(se()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Z=function(){R!=null&&o(oe()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},ee=function(){o(m())};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"dashboard",children:[e.jsx("h2",{className:"title",children:"Dashboard"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("img",{src:"".concat(c),alt:""})}),e.jsx("span",{children:l})]}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("th",{children:e.jsx("h2",{children:"Settings"})})}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("form",{action:"",children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"change-name",children:[e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:$,onChange:C}),e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:q,onChange:C}),e.jsx("button",{onClick:C,children:e.jsx("h3",{children:"Change Name"})})]}),e.jsx("tr",{}),e.jsxs("tr",{className:"change-username",children:[e.jsx("input",{type:"text",name:"username",placeholder:"Username",value:Q,onChange:P}),e.jsx("button",{onClick:P,children:e.jsx("h3",{children:"Change Username"})})]}),e.jsxs("tr",{className:"change-password",children:[e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:"",onChange:x}),e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:"",onChange:x}),e.jsx("button",{onClick:x,children:e.jsx("h3",{children:"Change Password"})})]}),e.jsx("tr",{className:"forgot-password",children:e.jsx("button",{onClick:W,children:e.jsx("h3",{children:"Forgot Password"})})}),e.jsxs("tr",{className:"change-phone",children:[e.jsx("input",{type:"text",name:"phone",placeholder:"Phone Number",value:X,onChange:I}),e.jsx("button",{onClick:I,children:e.jsx("h3",{children:"Change Phone"})})]}),e.jsxs("tr",{className:"remove-email",children:[e.jsx("input",{type:"text",name:"email",placeholder:"Email",value:k,onChange:U}),e.jsx("button",{onClick:U,children:e.jsx("h3",{children:"Remove Email"})})]})]})]})})})}),e.jsxs("tr",{className:"logout",children:[e.jsx("button",{onClick:Y,children:e.jsx("h3",{children:"LOG OUT"})}),R!=null&&e.jsx("button",{onClick:Z,children:e.jsx("h3",{children:"LOG OUT ALL"})})]}),e.jsx("tr",{className:"remove-account",children:e.jsx("button",{onClick:ee,children:e.jsx("h3",{children:"REMOVE ACCOUNT"})})})]}),e.jsx("tfoot",{children:y!==""&&e.jsx("div",{className:"status-bar card ".concat(z),children:e.jsx("span",{children:y})})})]})]})})}export{fe as default};
//# sourceMappingURL=Dashboard.js.map
