import{u as l,r as t,g as fa,f as ga,_ as o,j as e,h as pa,i as va,k as Sa,m as Na,n as xa,o as Ca,p as ja,q as _a,l as wa,t as Ea,v as ya,w as ka}from"./index.js";import La from"./Login.js";import{u as Ee,S as Ra}from"./StatusBarComponent.js";import"./NavigationLoginComponent.js";function Aa(){var n=Ee(),h=l(function(s){return s.password}),w=h.passwordLoading;h.passwordError;var N=h.passwordSuccessMessage,E=h.passwordErrorMessage,y=h.passwordStatusCode,c=l(function(s){return s.user}),k=c.userLoading;c.userError;var L=c.userSuccessMessage,x=c.userErrorMessage,R=c.userStatusCode,g=c.username,A=c.firstname,p=c.lastname,v=c.nickname,f=c.nicename,M=c.roles,S=c.phone,d=l(function(s){return s.email}),D=d.emailLoading;d.emailError;var P=d.emailSuccessMessage,C=d.emailErrorMessage,b=d.emailStatusCode,m=l(function(s){return s.role});m.roleLoading,m.roleError,m.roleSuccessMessage,m.roleErrorMessage,m.roleStatusCode;var U=m.availableRoles,r=l(function(s){return s.logout});r.logoutLoading,r.logoutError;var q=r.logoutSuccessMessage,j=r.logoutErrorMessage,_=l(function(s){return s.account}),Y=_.accountLoading;_.accountError;var G=_.accountSuccessMessage,K=_.accountErrorMessage,z=_.accountStatusCode,T=_.email;t.useEffect(function(){n(fa(T))},[n,T]),t.useEffect(function(){g&&ae(g),A&&te(A),p&&re(p),v&&ie(v),f&&de(f),S&&Ne(S)},[g,I,p,v,f,S]),t.useEffect(function(){n(ga())},[]),t.useEffect(function(){(Y||k||D||w)&&i("")},[n,Y,k,D,w]),t.useEffect(function(){q&&(u("success"),i(q))},[n,q]),t.useEffect(function(){L&&(u("success"),i(L))},[n,L]),t.useEffect(function(){P&&(u("success"),i(P))},[n,P]),t.useEffect(function(){N&&(u("success"),i(N))},[n,N]),t.useEffect(function(){G&&(u("success"),i(G))},[n,G]),t.useEffect(function(){j&&(u("error"),i(j))},[n,j]),t.useEffect(function(){j&&(u("error"),i(j))},[n,j]),t.useEffect(function(){x&&R!=403&&(u("error"),i(x))},[n,x]),t.useEffect(function(){C&&b!=403&&(u("error"),i(C))},[n,C]),t.useEffect(function(){E&&y!=403&&(u("error"),i(E))},[n,E]),t.useEffect(function(){K&&z!=403&&(u("error"),i(K))},[n,K]),t.useEffect(function(){(R!=403||b!=403||y!=403||z!=403)&&B!=""&&(Ce("modal-overlay"),setTimeout(function(){Ce("")},3e3))},[n,R,b,y,z,B]);var ye=t.useState(""),Z=o(ye,2),O=Z[0],ke=Z[1],Le=t.useState(""),$=o(Le,2),F=$[0],Re=$[1],Ae=t.useState(g),ee=o(Ae,2),H=ee[0],ae=ee[1],Me=t.useState(A),se=o(Me,2),I=se[0],te=se[1],De=t.useState(p),ne=o(De,2),J=ne[0],re=ne[1],Pe=t.useState(v),oe=o(Pe,2),ce=oe[0],ie=oe[1],be=t.useState(f),ue=o(be,2),le=ue[0],de=ue[1],Ue=t.useState(""),me=o(Ue,2),Q=me[0],Te=me[1],Oe=t.useState(""),he=o(Oe,2),fe=he[0],Fe=he[1],Ie=t.useState(""),ge=o(Ie,2),V=ge[0],Be=ge[1],qe=t.useState(""),pe=o(qe,2),ve=pe[0],Ge=pe[1],Ke=t.useState(S),Se=o(Ke,2),W=Se[0],Ne=Se[1],ze=t.useState(""),xe=o(ze,2),He=xe[0],Ce=xe[1],Je=t.useState(""),je=o(Je,2),Qe=je[0],u=je[1],Ve=t.useState(""),_e=o(Ve,2),B=_e[0],i=_e[1],we=function(a){a.preventDefault(),a.target.name=="password"&&ke(a.target.value),a.target.name=="confirmPassword"&&Re(a.target.value)},We=function(a){a.preventDefault(),O==F&&O!=""&&F!=""&&n(pa({password:O,confirmPassword:F}))},Xe=function(a){a.preventDefault(),a.target.name=="username"&&ae(a.target.value)},Ye=function(a){a.preventDefault(),H!=""&&n(va(H))},Ze=function(a){a.preventDefault(),a.target.name=="firstname"&&te(a.target.value)},$e=function(a){a.preventDefault(),a.target.name=="lastname"&&re(a.target.value)},ea=function(a){a.preventDefault(),(I!==""||J!=="")&&n(Sa({firstName:I,lastName:J})).then(function(X){X.payload.statusCode==201&&(n(updateAccountFirstName(X.payload.firstname)),n(updateAccountLastName(X.payload.lastname)))})},aa=function(a){a.preventDefault(),a.target.name=="nickname"&&ie(a.target.value)},sa=function(a){a.preventDefault(),ce!=""&&n(Na(ce))},ta=function(a){a.preventDefault(),a.target.name=="nicename"&&de(a.target.value)},na=function(a){a.preventDefault(),le!=""&&n(xa(le))},ra=function(a){Te(a.target.value),Fe(a.target.selectedOptions[0].text)},oa=function(a){a.preventDefault(),Q!=""&&fe!=""&&n(Ca({name:Q,display_name:fe}))},ca=function(a){Be(a.target.value),Ge(a.target.selectedOptions[0].text)},ia=function(a){a.preventDefault(),V!=""&&ve!=""&&n(ja({name:V,display_name:ve}))},ua=function(a){a.preventDefault(),a.target.name=="phone"&&Ne(a.target.value)},la=function(a){a.preventDefault(),W!=""&&n(_a(W))},da=function(){n(wa()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},ma=function(){Ea!=null&&n(ya()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},ha=function(){T!=""||localStorage.getItem("email")!=""?n(ka(T||localStorage.getItem("email"))):(u("error"),i("An email is required to lock your account."))};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"settings",children:[e.jsxs("span",{className:"change-password",children:[e.jsx("input",{className:"input-password",type:"password",name:"password",placeholder:"Password",value:O,onChange:we}),e.jsx("input",{className:"input-password",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:F,onChange:we}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:We,children:e.jsx("h3",{children:"Change Password"})})})]}),e.jsxs("span",{className:"change-username",children:[e.jsx("input",{className:"input-username",type:"text",name:"username",placeholder:"Username",value:H,onChange:Xe}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:Ye,children:e.jsx("h3",{children:"Change Username"})})})]}),e.jsxs("span",{className:"change-name",children:[e.jsx("input",{className:"input-name",type:"text",name:"firstname",placeholder:"First Name",value:I,onChange:Ze}),e.jsx("input",{className:"input-name",type:"text",name:"lastname",placeholder:"Last Name",value:J,onChange:$e}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:ea,children:e.jsx("h3",{children:"Change Name"})})})]}),e.jsxs("span",{className:"change-nickname",children:[e.jsx("input",{className:"input-name",type:"text",name:"nickname",placeholder:"Nickname",value:v,onChange:aa}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:sa,children:e.jsx("h3",{children:"Change Nickname"})})})]}),e.jsxs("span",{className:"change-nicename",children:[e.jsx("input",{className:"input-name",type:"text",name:"nicename",placeholder:"Nicename",value:f,onChange:ta}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:na,children:e.jsx("h3",{children:"Change Nicename"})})})]}),Array.isArray(U)&&U.length>1&&e.jsxs("span",{className:"add-role",children:[e.jsx("select",{name:"add_role",id:"add_role",value:Q,onChange:ra,children:U.map(function(s){return e.jsx("option",{value:s.name,children:s.display_name},s.name)})}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:oa,children:e.jsx("h3",{children:"Add Role"})})})]}),Array.isArray(M)&&M.length>1&&e.jsxs("span",{className:"remove-role",children:[e.jsx("select",{name:"remove_role",id:"remove_role",value:V,onChange:ca,children:M.map(function(s){return e.jsx("option",{value:s.name,children:s.display_name},s.name)})}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:ia,children:e.jsx("h3",{children:"Remove Role"})})})]}),e.jsxs("span",{className:"change-phone",children:[e.jsx("input",{className:"input-phone",type:"text",name:"phone",placeholder:"Phone Number",value:W,onChange:ua}),e.jsx("div",{className:"action",children:e.jsx("button",{onClick:la,children:e.jsx("h3",{children:"Change Phone"})})})]}),e.jsxs("span",{className:"logout",children:[e.jsx("button",{onClick:da,children:e.jsx("h3",{children:"LOG OUT"})}),e.jsx("button",{onClick:ma,children:e.jsx("h3",{children:"LOG OUT ALL"})})]}),e.jsx("span",{className:"lock-account",children:e.jsx("button",{onClick:ha,children:e.jsx("h3",{children:"LOCK ACCOUNT"})})}),e.jsx("span",{className:He,children:B!=""&&e.jsx(Ra,{messageType:Qe,message:B})})]})})}function Ua(){var n=Ee(),h=l(function(r){return r.login}),w=h.profileImage,N=h.displayName,E=w||localStorage.getItem("profile_image"),y=N||localStorage.getItem("display_name"),c=l(function(r){return r.user}),k=c.changeStatusCode,L=l(function(r){return r.email}),x=L.emailStatusCode,R=l(function(r){return r.password}),g=R.passwordStatusCode,A=l(function(r){return r.login}),p=A.loginStatusCode,v=l(function(r){return r.account}),f=v.accountStatusCode,M=t.useState(""),S=o(M,2),d=S[0],D=S[1],P=t.useState(!1),C=o(P,2),b=C[0],m=C[1];t.useEffect(function(){p==200&&m(!1)},[p]),t.useEffect(function(){(k==403||x==403||g==403||f==403)&&m(!0)},[n,k,x,g,f]);var U=function(){d==!1&&D(!0),d==!0&&D(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Dashboard"}),e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"profile-image",children:e.jsx("img",{src:"".concat(E),alt:""})}),e.jsx("h2",{className:"display-name",children:y}),e.jsx("div",{className:"action options",children:e.jsxs("button",{className:"settings-button",onClick:U,children:[e.jsx("i",{class:"fa-solid fa-gears"}),e.jsx("h3",{children:"Settings"})]})})]}),d&&e.jsx(Aa,{}),b&&e.jsx("div",{className:"modal-overlay",children:e.jsx("main",{className:"login",children:e.jsx(La,{})})})]})}export{Ua as default};
//# sourceMappingURL=Dashboard.js.map
