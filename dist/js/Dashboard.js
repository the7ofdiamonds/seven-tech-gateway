import{u as l,r as s,_ as i,j as e,k as ee,m as Fe,n as Te,o as Ie,p as Oe,q as Re,h as qe,s as Be,l as Ge,t as Ve,v as ze}from"./index.js";import{S as He,L as Je}from"./Login.js";import{u as ae}from"./useDispatch.js";import"./NavigationLoginComponent.js";function Ke(){var t=ae(),d=l(function(n){return n.change}),N=d.changeLoading;d.changeError;var m=d.changeSuccessMessage,_=d.changeErrorMessage,E=d.changeStatusCode,f=l(function(n){return n.email}),L=f.emailLoading;f.emailError;var P=f.emailSuccessMessage,S=f.emailErrorMessage,M=f.emailStatusCode,g=l(function(n){return n.password}),A=g.passwordLoading;g.passwordError;var p=g.passwordSuccessMessage,y=g.passwordErrorMessage,v=g.passwordStatusCode,C=l(function(n){return n.logout});C.logoutLoading,C.logoutError;var x=C.logoutSuccessMessage,h=C.logoutErrorMessage,o=l(function(n){return n.account}),U=o.accountLoading;o.accountError;var j=o.accountSuccessMessage,b=o.accountErrorMessage,w=o.accountStatusCode,D=o.email,r=o.username,se=o.firstname,te=o.lastname,ne=o.phone,re=s.useState(se),G=i(re,2),I=G[0],oe=G[1],ce=s.useState(te),V=i(ce,2),O=V[0],ue=V[1],ie=s.useState(r),z=i(ie,2),R=z[0],le=z[1],he=s.useState(""),H=i(he,2),k=H[0],de=H[1],ge=s.useState(""),J=i(ge,2),F=J[0],fe=J[1],me=s.useState(ne),K=i(me,2),q=K[0],Se=K[1],pe=s.useState(""),Q=i(pe,2);Q[0],Q[1];var ve=s.useState(""),W=i(ve,2),Ce=W[0],X=W[1],xe=s.useState(""),Y=i(xe,2),je=Y[0],u=Y[1],we=s.useState(""),Z=i(we,2),T=Z[0],c=Z[1];s.useEffect(function(){(U||N||L||A)&&c("")},[t,U,N,L,A]),s.useEffect(function(){x&&(u("success"),c(x))},[t,x]),s.useEffect(function(){m&&(u("success"),c(m))},[t,m]),s.useEffect(function(){P&&(u("success"),c(P))},[t,P]),s.useEffect(function(){p&&(u("success"),c(p))},[t,p]),s.useEffect(function(){j&&(u("success"),c(j))},[t,j]),s.useEffect(function(){h&&(u("error"),c(h))},[t,h]),s.useEffect(function(){h&&(u("error"),c(h))},[t,h]),s.useEffect(function(){_&&E!=403&&(u("error"),c(_))},[t,_]),s.useEffect(function(){S&&M!=403&&(u("error"),c(S))},[t,S]),s.useEffect(function(){y&&v!=403&&(u("error"),c(y))},[t,y]),s.useEffect(function(){b&&w!=403&&(u("error"),c(b))},[t,b]),s.useEffect(function(){(E!=403||M!=403||v!=403||w!=403)&&T!=""&&(X("modal-overlay"),setTimeout(function(){X("")},3e3))},[t,E,M,v,w,T]);var Ne=function(a){a.preventDefault(),a.target.name=="firstname"&&oe(a.target.value)},_e=function(a){a.preventDefault(),a.target.name=="lastname"&&ue(a.target.value)},Ee=function(a){a.preventDefault(),(I!==""||O!=="")&&t(Fe({firstName:I,lastName:O})).then(function(B){B.payload.statusCode==201&&(t(Te(B.payload.firstname)),t(Ie(B.payload.lastname)))})},Le=function(a){a.preventDefault(),a.target.name=="username"&&le(a.target.value)},Pe=function(a){a.preventDefault(),R!=""&&t(Oe(R))},$=function(a){a.preventDefault(),a.target.name=="password"&&de(a.target.value),a.target.name=="confirmPassword"&&fe(a.target.value)},Me=function(a){a.preventDefault(),k==F&&k!=""&&F!=""&&t(Re({password:k,confirmPassword:F}))},ye=function(a){a.preventDefault(),D!=""||localStorage.getItem("email")!=""?t(qe(D||localStorage.getItem("email"))):(u("error"),c("An email is required to reset password."))},be=function(a){a.preventDefault(),a.target.name=="phone"&&Se(a.target.value)},De=function(a){a.preventDefault(),q!=""&&t(Be(q))},Ae=function(){t(Ge()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Ue=function(){ee!=null&&t(Ve()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},ke=function(){t(ze())};return e.jsx(e.Fragment,{children:e.jsxs("table",{className:"settings",children:[e.jsx("thead",{children:e.jsx("th",{children:e.jsx("h2",{children:"Settings"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{children:e.jsx("form",{action:"",children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"change-name",children:[e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:I,onChange:Ne}),e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:O,onChange:_e}),e.jsx("button",{onClick:Ee,children:e.jsx("h3",{children:"Change Name"})})]}),e.jsx("tr",{}),e.jsxs("tr",{className:"change-username",children:[e.jsx("input",{type:"text",name:"username",placeholder:"Username",value:R,onChange:Le}),e.jsx("button",{onClick:Pe,children:e.jsx("h3",{children:"Change Username"})})]}),e.jsxs("tr",{className:"change-phone",children:[e.jsx("input",{type:"text",name:"phone",placeholder:"Phone Number",value:q,onChange:be}),e.jsx("button",{onClick:De,children:e.jsx("h3",{children:"Change Phone"})})]}),e.jsxs("tr",{className:"change-password",children:[e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:k,onChange:$}),e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:F,onChange:$}),e.jsx("button",{onClick:Me,children:e.jsx("h3",{children:"Change Password"})})]})]})]})})})})}),e.jsxs("tfoot",{children:[e.jsx("tr",{className:"forgot-password",children:e.jsx("button",{onClick:ye,children:e.jsx("h3",{children:"Forgot Password"})})}),e.jsxs("tr",{className:"logout",children:[e.jsx("button",{onClick:Ae,children:e.jsx("h3",{children:"LOG OUT"})}),ee!=null&&e.jsx("button",{onClick:Ue,children:e.jsx("h3",{children:"LOG OUT ALL"})})]}),e.jsx("tr",{className:"remove-account",children:e.jsx("button",{onClick:ke,children:e.jsx("h3",{children:"REMOVE ACCOUNT"})})}),e.jsx("span",{className:Ce,children:T!==""&&e.jsx(He,{messageType:je,message:T})})]})]})})}function Ze(){var t=ae(),d=l(function(r){return r.login}),N=d.profileImage,m=d.displayName,_=N||localStorage.getItem("profile_image"),E=m||localStorage.getItem("display_name"),f=l(function(r){return r.change}),L=f.changeStatusCode,P=l(function(r){return r.email}),S=P.emailStatusCode,M=l(function(r){return r.password}),g=M.passwordStatusCode,A=l(function(r){return r.login}),p=A.loginStatusCode,y=l(function(r){return r.account}),v=y.accountStatusCode,C=s.useState(""),x=i(C,2),h=x[0],o=x[1],U=s.useState(!1),j=i(U,2),b=j[0],w=j[1];s.useEffect(function(){p==200&&w(!1)},[p]),s.useEffect(function(){(L==403||S==403||g==403||v==403)&&w(!0)},[t,L,S,g,v]);var D=function(){h==!1&&o(!0),h==!0&&o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Dashboard"}),e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"profile-image",children:e.jsx("img",{src:"".concat(_),alt:""})}),e.jsx("h2",{className:"display-name",children:E}),e.jsx("div",{className:"options",children:e.jsx("button",{className:"settings-button",onClick:D,children:e.jsx("i",{class:"fa-solid fa-gears"})})})]}),h&&e.jsx(Ke,{}),b&&e.jsx("div",{className:"modal-overlay",children:e.jsx(Je,{})})]})}export{Ze as default};
//# sourceMappingURL=Dashboard.js.map
