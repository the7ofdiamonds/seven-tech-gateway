import{V as I,W as M,X as y,n as T,o as u,Y as R,K as c,s as f,j as r}from"./index.js";import{N as C}from"./NavigationLogin.js";var x=function(o){return o.mesaage==="Error (auth/too-many-requests): Firebase: Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later. (auth/too-many-requests)."?"Access to this account has been temporarily disabled due to too many failed login attempts. You can immediately restore it by resetting your password or you can try again later.":o.mesaage=="Error (auth/wrong-password): Firebase: The password is invalid or the user does not have a password. (auth/wrong-password)."?"The password is invalid or the user does not have a password.":o.mesaage=="Error (auth/user-not-found): Firebase: There is no user record corresponding to this identifier. The user may have been deleted. (auth/user-not-found)."?"There is no user record corresponding to this identifier. The user may have been deleted.":o.message},S={VITE_API_KEY:"AIzaSyBu0CCToizQh2SORCP-4dAmXHJpzB6tU6k",VITE_AUTH_DOMAIN:"theorb-f3a48.firebaseapp.com",VITE_DATABASE_URL:"https://theorb-f3a48.firebaseio.com",VITE_PROJECT_ID:"theorb-f3a48",VITE_STORAGE_BUCKET:"theorb-f3a48.appspot.com",VITE_MESSAGING_SENDER_ID:"1073451047758",VITE_APP_ID:"1:1073451047758:web:ae958815b1fd677e071c1f",VITE_MEASUREMENT_ID:"G-09W10PNNF0",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},D=S.VITE_BACKEND_URL?S.VITE_BACKEND_URL+"/forgot-password":"/wp-json/seven-tech/v1/users/forgot-password",N={forgotLoading:!1,forgotError:"",forgotSuccessMessage:"",forgotErrorMessage:""},V=I(function(){var t=T(u().mark(function o(e){var s,i;return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,R(e)&&(e=identity),a.next=4,fetch("".concat(D),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});case 4:return s=a.sent,a.next=7,s.json();case 7:return i=a.sent,a.abrupt("return",i);case 11:throw a.prev=11,a.t0=a.catch(0),console.error(a.t0),a.t0;case 15:case"end":return a.stop()}},o,null,[[0,11]])}));return function(o){return t.apply(this,arguments)}}());M({name:"forgot",initialState:N,reducers:{},extraReducers:function(o){o.addCase(updateforgot.fulfilled,function(e,s){e.forgotLoading=!1,e.forgotError="",e.forgotSuccessMessage=s.payload.successMessage,e.forgotErrorMessage=s.payload.errorMessage}).addMatcher(y(updateforgot.pending),function(e){e.forgotLoading=!0,e.forgotError=null,e.forgotSuccessMessage=null,e.forgotErrorMessage=null}).addMatcher(y(updateforgot.rejected),function(e,s){e.forgotLoading=!1,e.forgotError=s.error,e.forgotErrorMessage=s.error})}});function O(){var t=c.useState(""),o=f(t,2),e=o[0],s=o[1],i=c.useState(""),d=f(i,2),a=d[0],v=d[1],b=c.useState("If you forgot your password, enter your username or email."),h=f(b,2),g=h[0],w=h[1],_=function(){var p=T(u().mark(function n(m){return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:m.preventDefault(),V(e).then(function(){var A=new URLSearchParams(window.location.search),E=A.get("redirectTo");setTimeout(function(){E===null?window.location.href="/login":window.location.href=E},5e3),w(x("Check your inbox and spam for ".concat(e))),v("info")});case 2:case"end":return l.stop()}},n)}));return function(m){return p.apply(this,arguments)}}(),j=function(n){n.target.name==="email"&&s(n.target.value)};return r.jsx(r.Fragment,{children:r.jsxs("main",{className:"forgot",children:[r.jsx(C,{}),r.jsx("div",{className:"login card",children:r.jsx("form",{children:r.jsxs("table",{children:[r.jsx("thead",{}),r.jsx("tbody",{children:r.jsx("tr",{children:r.jsx("td",{children:r.jsx("input",{type:"email",name:"email",placeholder:"Email",onChange:j,required:!0})})})}),r.jsx("tfoot",{children:r.jsx("td",{children:r.jsx("button",{type:"submit",onClick:_,children:r.jsx("h3",{children:"RESET"})})})})]})})}),g!==""&&r.jsx("div",{className:"status-bar card ".concat(a),children:r.jsx("span",{children:g})})]})})}export{O as default};
//# sourceMappingURL=Forgot.js.map
