import{u as i,r as s,e as l,j as e,q as Fe,t as Te,v as ke,s as Ie,w as Oe,l as Re,x as qe,y as Ge}from"./index.js";import Be from"./Login.js";import{S as Ve}from"./StatusBarComponent.js";import{u as ee}from"./useDispatch.js";import"./NavigationLoginComponent.js";function We(){var t=ee(),d=i(function(n){return n.change}),_=d.changeLoading;d.changeError;var S=d.changeSuccessMessage,E=d.changeErrorMessage,P=d.changeStatusCode,m=i(function(n){return n.email}),L=m.emailLoading;m.emailError;var y=m.emailSuccessMessage,p=m.emailErrorMessage,M=m.emailStatusCode,g=i(function(n){return n.password}),D=g.passwordLoading;g.passwordError;var v=g.passwordSuccessMessage,b=g.passwordErrorMessage,C=g.passwordStatusCode,x=i(function(n){return n.logout});x.logoutLoading,x.logoutError;var j=x.logoutSuccessMessage,h=x.logoutErrorMessage,c=i(function(n){return n.account}),U=c.accountLoading;c.accountError;var w=c.accountSuccessMessage,A=c.accountErrorMessage,N=c.accountStatusCode,f=c.email,r=c.username,ae=c.firstname,se=c.lastname,te=c.phone,ne=s.useState(ae),B=l(ne,2),I=B[0],re=B[1],oe=s.useState(se),V=l(oe,2),O=V[0],ce=V[1],ue=s.useState(r),W=l(ue,2),R=W[0],le=W[1],ie=s.useState(""),z=l(ie,2),F=z[0],he=z[1],de=s.useState(""),H=l(de,2),T=H[0],ge=H[1],fe=s.useState(te),J=l(fe,2),q=J[0],me=J[1],Se=s.useState(""),K=l(Se,2);K[0],K[1];var pe=s.useState(""),Q=l(pe,2),ve=Q[0],X=Q[1],Ce=s.useState(""),Y=l(Ce,2),xe=Y[0],u=Y[1],je=s.useState(""),Z=l(je,2),k=Z[0],o=Z[1];s.useEffect(function(){(U||_||L||D)&&o("")},[t,U,_,L,D]),s.useEffect(function(){j&&(u("success"),o(j))},[t,j]),s.useEffect(function(){S&&(u("success"),o(S))},[t,S]),s.useEffect(function(){y&&(u("success"),o(y))},[t,y]),s.useEffect(function(){v&&(u("success"),o(v))},[t,v]),s.useEffect(function(){w&&(u("success"),o(w))},[t,w]),s.useEffect(function(){h&&(u("error"),o(h))},[t,h]),s.useEffect(function(){h&&(u("error"),o(h))},[t,h]),s.useEffect(function(){E&&P!=403&&(u("error"),o(E))},[t,E]),s.useEffect(function(){p&&M!=403&&(u("error"),o(p))},[t,p]),s.useEffect(function(){b&&C!=403&&(u("error"),o(b))},[t,b]),s.useEffect(function(){A&&N!=403&&(u("error"),o(A))},[t,A]),s.useEffect(function(){(P!=403||M!=403||C!=403||N!=403)&&k!=""&&(X("modal-overlay"),setTimeout(function(){X("")},3e3))},[t,P,M,C,N,k]);var we=function(a){a.preventDefault(),a.target.name=="firstname"&&re(a.target.value)},Ne=function(a){a.preventDefault(),a.target.name=="lastname"&&ce(a.target.value)},_e=function(a){a.preventDefault(),(I!==""||O!=="")&&t(Fe({firstName:I,lastName:O})).then(function(G){G.payload.statusCode==201&&(t(updateAccountFirstName(G.payload.firstname)),t(updateAccountLastName(G.payload.lastname)))})},Ee=function(a){a.preventDefault(),a.target.name=="username"&&le(a.target.value)},Pe=function(a){a.preventDefault(),R!=""&&t(Te(R))},$=function(a){a.preventDefault(),a.target.name=="password"&&he(a.target.value),a.target.name=="confirmPassword"&&ge(a.target.value)},Le=function(a){a.preventDefault(),F==T&&F!=""&&T!=""&&t(ke({password:F,confirmPassword:T}))},ye=function(a){a.preventDefault(),f!=""||localStorage.getItem("email")!=""?t(Ie(f||localStorage.getItem("email"))):(u("error"),o("An email is required to reset password."))},Me=function(a){a.preventDefault(),a.target.name=="phone"&&me(a.target.value)},be=function(a){a.preventDefault(),q!=""&&t(Oe(q))},Ae=function(){t(Re()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},De=function(){logoutAllUrl!=null&&t(qe()).then(function(){setTimeout(function(){window.location.href="/"},5e3)})},Ue=function(){f!=""||localStorage.getItem("email")!=""?t(Ge(f||localStorage.getItem("email"))):(u("error"),o("An email is required to remove your account."))};return e.jsx(e.Fragment,{children:e.jsxs("table",{className:"settings",children:[e.jsx("thead",{children:e.jsx("th",{children:e.jsx("h2",{children:"Settings"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{children:e.jsx("form",{action:"",children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"change-name",children:[e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:I,onChange:we}),e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:O,onChange:Ne}),e.jsx("button",{onClick:_e,children:e.jsx("h3",{children:"Change Name"})})]}),e.jsx("tr",{}),e.jsxs("tr",{className:"change-username",children:[e.jsx("input",{type:"text",name:"username",placeholder:"Username",value:R,onChange:Ee}),e.jsx("button",{onClick:Pe,children:e.jsx("h3",{children:"Change Username"})})]}),e.jsxs("tr",{className:"change-phone",children:[e.jsx("input",{type:"text",name:"phone",placeholder:"Phone Number",value:q,onChange:Me}),e.jsx("button",{onClick:be,children:e.jsx("h3",{children:"Change Phone"})})]}),e.jsxs("tr",{className:"change-password",children:[e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:F,onChange:$}),e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:T,onChange:$}),e.jsx("button",{onClick:Le,children:e.jsx("h3",{children:"Change Password"})})]})]})]})})})})}),e.jsxs("tfoot",{children:[e.jsx("tr",{className:"forgot-password",children:e.jsx("button",{onClick:ye,children:e.jsx("h3",{children:"FORGOT PASSWORD"})})}),e.jsxs("tr",{className:"logout",children:[e.jsx("button",{onClick:Ae,children:e.jsx("h3",{children:"LOG OUT"})}),logoutAllUrl!=null&&e.jsx("button",{onClick:De,children:e.jsx("h3",{children:"LOG OUT ALL"})})]}),e.jsx("tr",{className:"remove-account",children:e.jsx("button",{onClick:Ue,children:e.jsx("h3",{children:"REMOVE ACCOUNT"})})}),e.jsx("span",{className:ve,children:k!==""&&e.jsx(Ve,{messageType:xe,message:k})})]})]})})}function Xe(){var t=ee(),d=i(function(r){return r.login}),_=d.profileImage,S=d.displayName,E=_||localStorage.getItem("profile_image"),P=S||localStorage.getItem("display_name"),m=i(function(r){return r.change}),L=m.changeStatusCode,y=i(function(r){return r.email}),p=y.emailStatusCode,M=i(function(r){return r.password}),g=M.passwordStatusCode,D=i(function(r){return r.login}),v=D.loginStatusCode,b=i(function(r){return r.account}),C=b.accountStatusCode,x=s.useState(""),j=l(x,2),h=j[0],c=j[1],U=s.useState(!1),w=l(U,2),A=w[0],N=w[1];s.useEffect(function(){v==200&&N(!1)},[v]),s.useEffect(function(){(L==403||p==403||g==403||C==403)&&N(!0)},[t,L,p,g,C]);var f=function(){h==!1&&c(!0),h==!0&&c(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"Dashboard"}),e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"profile-image",children:e.jsx("img",{src:"".concat(E),alt:""})}),e.jsx("h2",{className:"display-name",children:P}),e.jsx("div",{className:"options",children:e.jsx("button",{className:"settings-button",onClick:f,children:e.jsx("i",{class:"fa-solid fa-gears"})})})]}),h&&e.jsx(We,{}),A&&e.jsx("div",{className:"modal-overlay",children:e.jsx("main",{className:"login",children:e.jsx(Be,{})})})]})}export{Xe as default};
//# sourceMappingURL=Dashboard.js.map
