{"version":3,"file":"AccountRecovery.js","sources":["../../src/views/AccountRecovery.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { unlockAccount } from '../controllers/accountSlice';\n\nimport { isValidEmail } from '../utils/Validation';\n\nimport StatusBarComponent from './components/StatusBarComponent';\n\nfunction AccountRecovery() {\n  const { emailEncoded, confirmationCode } = useParams();\n\n  const email = emailEncoded.replace(/%40/g, '@');\n\n  const dispatch = useDispatch();\n\n  const { accountSuccessMessage, accountErrorMessage, accountStatusCode } =\n    useSelector((state) => state.account);\n\n  const [message, setMessage] = useState(\n    'Check your email for the confirmation code and link.'\n  );\n  const [messageType, setMessageType] = useState('');\n\n  useEffect(() => {\n    if (isValidEmail(email) != true) {\n      setMessageType('error');\n      setMessage('Email is not valid.');\n    }\n  }, [email]);\n\n  useEffect(() => {\n    if (accountSuccessMessage) {\n      setMessage(accountSuccessMessage);\n      setMessageType('success');\n    }\n  }, [accountSuccessMessage]);\n\n  useEffect(() => {\n    if (accountErrorMessage) {\n      setMessage(accountErrorMessage);\n      setMessageType('error');\n    }\n  }, [accountErrorMessage]);\n\n  useEffect(() => {\n    if (\n      (email != '' || email != undefined) &&\n      (confirmationCode != '' || confirmationCode != undefined)\n    ) {\n      dispatch(unlockAccount({ email, confirmationCode }));\n    }\n  }, [email, confirmationCode]);\n\n  return (\n    <>\n      <main>\n        {message !== '' && (\n          <StatusBarComponent messageType={messageType} message={message} />\n        )}\n      </main>\n    </>\n  );\n}\n\nexport default AccountRecovery;\n"],"names":["AccountRecovery","_useParams","useParams","emailEncoded","confirmationCode","email","replace","dispatch","useDispatch","_useSelector","useSelector","state","account","accountSuccessMessage","accountErrorMessage","accountStatusCode","_useState","useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","messageType","setMessageType","useEffect","isValidEmail","unlockAccount","jsx","Fragment","children","StatusBarComponent"],"mappings":"4JAUA,SAASA,GAAkB,CACzB,IAAAC,EAA2CC,EAAU,EAA7CC,EAAAF,EAAAE,aAAcC,EAAiBH,EAAjBG,iBAEhBC,EAAQF,EAAaG,QAAQ,OAAQ,GAAG,EAExCC,EAAWC,IAEXC,EACJC,EAAY,SAACC,EAAU,CAAA,OAAAA,EAAMC,QAAO,EAD9BC,IAAAA,sBAAuBC,EAAqBL,EAArBK,oBAAqBL,EAAAM,kBAG9C,IAAAC,EAAwBC,EAAA,SAC5B,sDACF,EAAAC,EAAAC,EAAAH,EAAA,CAAA,EAFOI,EAASF,EAAA,CAAA,EAAAG,EAAUH,EAAA,CAAA,EAG1BI,EAAsCL,WAAS,EAAE,EAAAM,EAAAJ,EAAAG,EAAA,CAAA,EAA1CE,EAAAD,EAAA,CAAA,EAAaE,EAAcF,EAAA,CAAA,EAElCG,OAAAA,EAAAA,UAAU,UAAM,CACVC,EAAatB,CAAK,GAAK,KACzBoB,EAAe,OAAO,EACtBJ,EAAW,qBAAqB,EAEpC,EAAG,CAAChB,CAAK,CAAC,EAEVqB,EAAAA,UAAU,UAAM,CACVb,IACFQ,EAAWR,CAAqB,EAChCY,EAAe,SAAS,EAE5B,EAAG,CAACZ,CAAqB,CAAC,EAE1Ba,EAAAA,UAAU,UAAM,CACVZ,IACFO,EAAWP,CAAmB,EAC9BW,EAAe,OAAO,EAE1B,EAAG,CAACX,CAAmB,CAAC,EAExBY,EAAAA,UAAU,UAAM,EAEXrB,GAAS,IAAMA,GAAS,QACxBD,GAAoB,IAAMA,GAAoB,OAE/CG,EAASqB,EAAc,CAAEvB,MAAAA,EAAOD,iBAAAA,CAAkB,CAAA,CAAC,CAEvD,EAAG,CAACC,EAAOD,CAAgB,CAAC,EAG1ByB,EAAAA,IAAAC,EAAAA,SAAA,CACEC,SAACF,EAAA,IAAA,OAAA,CACEE,SAAYX,IAAA,UACVY,EAAmB,CAAAR,YAAAA,EAA0BJ,QAAAA,EAAkB,EAEpE,CACF,CAAA,CAEJ"}