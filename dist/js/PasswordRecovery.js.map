{"version":3,"file":"PasswordRecovery.js","sources":["../../src/views/PasswordRecovery.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { updatePassword } from '../controllers/passwordSlice';\nimport {\n  isValidConfirmationCode,\n  isValidPassword,\n  isValidUsername,\n} from '../utils/Validation';\n\nfunction PasswordRecovery() {\n  const { username, confirmationCode } = useParams();\n\n  const dispatch = useDispatch();\n  const {\n    changeLoading,\n    changeError,\n    changeSuccessMessage,\n    changeErrorMessage,\n  } = useSelector((state) => state.change);\n\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [message, setMessage] = useState(\n    'Enter your preferred password twice.'\n  );\n  const [messageType, setMessageType] = useState('');\n  \n  useEffect(() => {\n    if (\n      password != '' &&\n      confirmPassword != '' &&\n      password === confirmPassword\n    ) {\n      setMessage('You have entered your password twice.');\n      setMessageType('success');\n    }\n  }, [password, confirmPassword]);\n\n  useEffect(() => {\n    if (password != '' && isValidPassword(password) == false) {\n      setMessage('Password is not valid.');\n      setMessageType('error');\n    }\n  }, [password]);\n\n  useEffect(() => {\n    if (\n      password != '' &&\n      confirmPassword != '' &&\n      !isValidPassword(password) &&\n      password != confirmPassword\n    ) {\n      setMessage('Passwords do not match.');\n      setMessageType('error');\n    }\n  }, [password, confirmPassword]);\n\n  useEffect(() => {\n    if (changeSuccessMessage) {\n      setMessage(changeSuccessMessage);\n      setMessageType('success');\n    }\n  }, [changeSuccessMessage]);\n\n  useEffect(() => {\n    if (changeErrorMessage) {\n      setMessage(changeErrorMessage);\n      setMessageType('error');\n    }\n  }, [changeErrorMessage]);\n\n  const handleChangePassword = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleChangeConfirmPassword = (e) => {\n    setConfirmPassword(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (\n      username &&\n      confirmationCode &&\n      isValidPassword(password) &&\n      password === confirmPassword\n    ) {\n      dispatch(updatePassword({ username, confirmationCode, password }));\n    }\n  };\n\n  return (\n    <>\n      <section>\n        <main>\n          <form action=\"\">\n            <table>\n              <thead></thead>\n              <tbody>\n                <tr>\n                  <td>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Password\"\n                      onChange={handleChangePassword}\n                      required\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <input\n                      type=\"password\"\n                      name=\"confirmPassword\"\n                      placeholder=\"Confirm Password\"\n                      onChange={handleChangeConfirmPassword}\n                      required\n                    />\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <tr>\n                  <td>\n                    <button type=\"submit\" onClick={handleSubmit}>\n                      <h3>CONFIRM</h3>\n                    </button>\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    {message !== '' && (\n                      <div className={`status-bar card ${messageType}`}>\n                        <span>{message}</span>\n                      </div>\n                    )}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n          </form>\n        </main>\n      </section>\n    </>\n  );\n}\n\nexport default PasswordRecovery;\n"],"names":["PasswordRecovery","_useParams","useParams","username","confirmationCode","dispatch","useDispatch","_useSelector","useSelector","state","change","changeLoading","changeError","changeSuccessMessage","changeErrorMessage","_useState","useState","_useState2","_slicedToArray","password","setPassword","_useState3","_useState4","confirmPassword","setConfirmPassword","_useState5","_useState6","message","setMessage","_useState7","_useState8","messageType","setMessageType","useEffect","isValidPassword","handleChangePassword","e","target","value","handleChangeConfirmPassword","handleSubmit","preventDefault","updatePassword","jsx","Fragment","children","action","jsxs","type","name","placeholder","onChange","required","onClick","className","concat"],"mappings":"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"}